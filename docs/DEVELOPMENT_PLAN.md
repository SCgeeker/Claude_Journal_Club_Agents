# é–‹ç™¼è¦åŠƒæ–‡ä»¶ - Phase 1.0

**å»ºç«‹æ—¥æœŸ**: 2025-11-29
**æ›´æ–°æ—¥æœŸ**: 2025-11-29
**ç‹€æ…‹**: âœ… Phase 1.0 æ ¸å¿ƒæ¶æ§‹å®Œæˆ

---

## ä¸€ã€èª²é¡Œç¸½è¦½

### ä¾†æºï¼šRESUME_MEMO.mdã€Œå…¶ä»–å„ªåŒ–å»ºè­°åŠèª²é¡Œã€

| # | èª²é¡Œ | é¡å‹ | å„ªå…ˆç´š | ç‹€æ…‹ |
|---|------|------|--------|------|
| A | å„å·¥å…· --help ä¸¦åˆ— `uv run` èˆ‡ `python` æŒ‡ä»¤æ ¼å¼ | UX | P3 | âœ… å®Œæˆ |
| B | `make_slides.py` ä¸»é¡Œåƒæ•¸æ”¹é¸å¡« | UX | P2 | âœ… å®Œæˆ |
| C | é è¨­ç°¡å ±æ ¼å¼æ”¹ Markdownï¼Œè¼¸å‡ºè·¯å¾‘æ”¹ `output/slides/` | Config | P2 | âœ… å®Œæˆ |
| D | Zettel ç”ŸæˆåŠŸèƒ½ç¨ç«‹ç‚º `generate_zettel.py` | **æ¶æ§‹** | **P1** | âœ… å®Œæˆ |
| E | çŸ¥è­˜åº«æ–°å¢ Zettel å¡ç‰‡ç®¡ç† | **æ¶æ§‹** | **P1** | âœ… å®Œæˆ |
| F | å…¶ä»–æœªåˆ—å‡ºçš„è€ƒæ…®é …ç›® | è¨­è¨ˆ | P1 | âœ… å®Œæˆ |

### æ–°å¢èª²é¡Œï¼ˆè¨è«–ä¸­ç¢ºèªï¼‰

| # | èª²é¡Œ | é¡å‹ | å„ªå…ˆç´š | ç‹€æ…‹ |
|---|------|------|--------|------|
| G | è‡ªè¨‚éœ€æ±‚æª”æ¡ˆæ”¯æ´ï¼ˆcustom_requirementsï¼‰ | åŠŸèƒ½ | **P1** | âœ… å®Œæˆ |
| H | PDF å·¥å…·æ•´åˆï¼ˆMarkItDownï¼‰ | åŠŸèƒ½ | P2 | â³ å¾…è¾¦ |
| I | ç¾æœ‰ Zettel å¡ç‰‡åŒ¯å…¥ | åŠŸèƒ½ | **P1** | âœ… å®Œæˆ |
| J | å‘é‡è³‡æ–™åº«ç®¡ç† | åŠŸèƒ½ | P1 | âœ… å®Œæˆ |

---

## äºŒã€èª²é¡Œä¾è³´é—œä¿‚åˆ†æ

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  D: Zettel ç¨ç«‹ç‚º generate_zettel   â”‚
                    â”‚     (æ¶æ§‹æ±ºç­– - å¿…é ˆå…ˆæ±ºå®š)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    â”‚                    â”‚
              â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ E: Zettel å…¥åº«  â”‚  â”‚ G: è‡ªè¨‚éœ€æ±‚æª”æ¡ˆ â”‚  â”‚ B: ä¸»é¡Œé¸å¡«     â”‚
    â”‚   (çŸ¥è­˜åº«æ•´åˆ)   â”‚  â”‚   (å…©å·¥å…·éƒ½éœ€è¦) â”‚  â”‚   (slides å„ªåŒ–) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                    â”‚                    â”‚
             â”‚                    â”‚                    â”‚
             â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ F-1: å¡ç‰‡æ›´æ–°   â”‚  â”‚ (å…©å·¥å…·å¯å¹³è¡Œ   â”‚  â”‚ C: é è¨­æ ¼å¼/    â”‚
    â”‚ F-2: ID è¡çª    â”‚  â”‚  å¯¦ä½œï¼Œç„¡é˜»å¡)   â”‚  â”‚    è¼¸å‡ºè·¯å¾‘     â”‚
    â”‚ F-3: å‘é‡åµŒå…¥   â”‚  â”‚                 â”‚  â”‚                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ F-4: åˆªé™¤é€£å‹•   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ç¨ç«‹èª²é¡Œï¼ˆç„¡ä¾è³´ï¼Œå¯éš¨æ™‚å¯¦ä½œï¼‰ï¼š

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ A: --help æ ¼å¼  â”‚  â”‚ H: MarkItDown   â”‚
    â”‚   (ç´” UX æ”¹å–„)   â”‚  â”‚   (æ–°å¢å¾Œç«¯)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é—œéµè·¯å¾‘

```
D (æ¶æ§‹æ±ºç­–) â†’ E (å…¥åº«æ©Ÿåˆ¶) â†’ F-1/F-2/F-3 (ç´°ç¯€è™•ç†) â†’ F-4 (åˆªé™¤é€£å‹•)
```

### å¯å¹³è¡Œé–‹ç™¼

| èª²é¡Œ | å¯èˆ‡å“ªäº›å¹³è¡Œ | èªªæ˜ |
|------|-------------|------|
| G (è‡ªè¨‚éœ€æ±‚) | å…¨éƒ¨ | ç´”åŠŸèƒ½æ–°å¢ï¼Œä¸å½±éŸ¿æ¶æ§‹ |
| A (--help) | å…¨éƒ¨ | ç´”æ–‡å­—ä¿®æ”¹ |
| H (MarkItDown) | å…¨éƒ¨ | ç¨ç«‹å¾Œç«¯ï¼Œä¸æ”¹ç¾æœ‰æµç¨‹ |
| B (ä¸»é¡Œé¸å¡«) | C | éƒ½æ˜¯ slides åƒæ•¸èª¿æ•´ |
| C (é è¨­æ ¼å¼) | B | éƒ½æ˜¯ slides åƒæ•¸èª¿æ•´ |

---

## ä¸‰ã€èª²é¡Œè©³ç´°åˆ†æ

### D: Zettel ç¨ç«‹ç‚º `generate_zettel.py`

**çµè«–ï¼šå»ºè­°ç¨ç«‹**

| é¢å‘ | make_slides.py ç¾æ³ | ç¨ç«‹å¾Œ |
|------|---------------------|--------|
| è²¬ä»» | æŠ•å½±ç‰‡ + Zettel æ··åˆ | å–®ä¸€è·è²¬ |
| åƒæ•¸ | 27+ åƒæ•¸ï¼Œè¤‡é›œ | å„è‡ªç²¾ç°¡ |
| å…¥åº« | å¯é¸ï¼ˆå¸¸è¢«å¿½ç•¥ï¼‰ | å¼·åˆ¶ï¼ˆè¨­è¨ˆç›®æ¨™ï¼‰ |
| ç¶­è­· | æ¢ä»¶åˆ†æ”¯å¤š | æ¸…æ™°åˆ†é›¢ |

**ç¨ç«‹å¾Œçš„ CLI è¨­è¨ˆ**ï¼š

```bash
# æ–°æŒ‡ä»¤
uv run zettel <pdf_path> [é¸é …]
uv run zettel --from-kb <paper_id> [é¸é …]

# ä¸»è¦åƒæ•¸
--detail {minimal|brief|standard|detailed|comprehensive}
--add-to-kb          # é è¨­å•Ÿç”¨
--cross-link         # å•Ÿç”¨è·¨è«–æ–‡é€£çµ
--no-custom          # å¿½ç•¥é è¨­è‡ªè¨‚éœ€æ±‚
```

**å° G (è‡ªè¨‚éœ€æ±‚) çš„å½±éŸ¿**ï¼š
- âœ… ç„¡è² é¢å½±éŸ¿
- âœ… ç¨ç«‹å¾Œå¯é‡å° zettel è¨­è¨ˆæ›´è²¼åˆ‡çš„é è¨­æª”æ¡ˆçµæ§‹

---

### E: çŸ¥è­˜åº«æ–°å¢ Zettel å¡ç‰‡ç®¡ç†

**ç¾æ³**ï¼š

```
çŸ¥è­˜åº«å·²æœ‰ Zettel ç›¸é—œè¡¨ï¼š
â”œâ”€â”€ zettel_cards         â† å­˜åœ¨ä½†ã€æœªè¢«ä½¿ç”¨ã€‘
â”œâ”€â”€ zettel_links         â† å­˜åœ¨ä½†ã€æœªè¢«ä½¿ç”¨ã€‘
â”œâ”€â”€ paper_zettel_links   â† å­˜åœ¨ä½†ã€æœªè¢«ä½¿ç”¨ã€‘
â””â”€â”€ zettel_cards_fts     â† å…¨æ–‡æœç´¢ï¼ˆå·²å°±ç·’ï¼‰

å•é¡Œï¼šç”Ÿæˆçš„å¡ç‰‡åªå¯«åˆ° output/ ç›®éŒ„ï¼Œæ²’æœ‰å…¥åº«ï¼
```

**éœ€è¦å¯¦ä½œ**ï¼š

| åŠŸèƒ½ | æ–¹æ³• | èªªæ˜ |
|------|------|------|
| å¡ç‰‡å…¥åº« | `kb.add_zettel_card()` | å·²å­˜åœ¨ï¼Œéœ€ç¢ºèªå®Œæ•´æ€§ |
| é€£çµå…¥åº« | `kb.add_zettel_link()` | å·²å­˜åœ¨ï¼Œéœ€æ•´åˆ |
| è«–æ–‡é—œè¯ | `kb.link_paper_to_zettel()` | å·²å­˜åœ¨ï¼Œéœ€æ•´åˆ |
| å‘é‡åµŒå…¥ | `vector_db.upsert_zettel()` | éœ€åŠ å…¥æµç¨‹ |

**å° G (è‡ªè¨‚éœ€æ±‚) çš„å½±éŸ¿**ï¼š
- âœ… ç„¡å½±éŸ¿ï¼Œå…¥åº«æ˜¯ç”Ÿæˆå¾Œçš„å‹•ä½œï¼Œèˆ‡æç¤ºèªç„¡é—œ

---

### F: å…¶ä»–è€ƒæ…®é …ç›®

#### F-1: Zettel æ›´æ–°æ©Ÿåˆ¶

**å•é¡Œ**ï¼šé‡æ–°ç”ŸæˆåŒä¸€è«–æ–‡çš„å¡ç‰‡æ™‚ï¼Œå¦‚ä½•è™•ç†èˆŠå¡ç‰‡ï¼Ÿ

**é¸é …**ï¼š

| ç­–ç•¥ | èªªæ˜ | å»ºè­° |
|------|------|------|
| è¦†è“‹ | åˆªé™¤èˆŠå¡ç‰‡ï¼Œå¯«å…¥æ–°å¡ç‰‡ | â­ ç°¡å–®ç›´æ¥ |
| ç‰ˆæœ¬æ§åˆ¶ | ä¿ç•™æ­·å²ç‰ˆæœ¬ | è¤‡é›œï¼Œæš«ä¸éœ€è¦ |
| åˆä½µ | æ™ºæ…§åˆä½µæ–°èˆŠå…§å®¹ | éåº¦å·¥ç¨‹ |

**å»ºè­°å¯¦ä½œ**ï¼š

```python
def regenerate_zettel(paper_id):
    # 1. åˆªé™¤è©²è«–æ–‡çš„èˆŠå¡ç‰‡
    kb.delete_zettel_cards_by_paper(paper_id)

    # 2. ç”Ÿæˆæ–°å¡ç‰‡
    cards = generate_new_cards(paper_id)

    # 3. å…¥åº«
    for card in cards:
        kb.add_zettel_card(card)
```

**å° G çš„å½±éŸ¿**ï¼šç„¡

---

#### F-2: å¡ç‰‡ ID è¡çª

**å•é¡Œ**ï¼šåŒä¸€è«–æ–‡é‡æ–°ç”Ÿæˆæ™‚ï¼Œ`{citekey}-001` æœƒé‡è¤‡

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

| æ–¹æ¡ˆ | èªªæ˜ | å»ºè­° |
|------|------|------|
| æ™‚é–“æˆ³å¾Œç¶´ | `Barsalou-1999-001-20251129` | å†—é•· |
| ç‰ˆæœ¬è™Ÿ | `Barsalou-1999-001-v2` | éœ€è¿½è¹¤ç‰ˆæœ¬ |
| è¦†è“‹ç­–ç•¥ | æ­é… F-1ï¼Œç›´æ¥è¦†è“‹ | â­ ç°¡å–® |

**å»ºè­°**ï¼šæ¡ç”¨è¦†è“‹ç­–ç•¥ï¼ˆF-1ï¼‰ï¼ŒID ä¿æŒç°¡æ½”

**å° G çš„å½±éŸ¿**ï¼šç„¡

---

#### F-3: å‘é‡åµŒå…¥æ™‚æ©Ÿ

**å•é¡Œ**ï¼šä½•æ™‚ç”Ÿæˆå¡ç‰‡çš„å‘é‡åµŒå…¥ï¼Ÿ

**é¸é …**ï¼š

| æ™‚æ©Ÿ | å„ªé» | ç¼ºé» |
|------|------|------|
| ç”Ÿæˆæ™‚ç«‹å³ | å³æ™‚å¯æœç´¢ | å¢åŠ ç”Ÿæˆæ™‚é–“ |
| æ‰¹æ¬¡è™•ç† | æ•ˆç‡é«˜ | éœ€é¡å¤–åŸ·è¡Œ |
| æŒ‰éœ€ç”Ÿæˆ | ç¯€çœè³‡æº | é¦–æ¬¡æœç´¢æ…¢ |

**å»ºè­°**ï¼š

```python
# generate_zettel.py
parser.add_argument('--embed', action='store_true', default=True,
                   help='ç”Ÿæˆå¾Œç«‹å³å»ºç«‹å‘é‡åµŒå…¥ï¼ˆé è¨­ï¼šæ˜¯ï¼‰')
parser.add_argument('--no-embed', action='store_true',
                   help='è·³éå‘é‡åµŒå…¥ï¼ˆç¨å¾Œç”¨ uv run embeddings è£œä¸Šï¼‰')
```

**å° G çš„å½±éŸ¿**ï¼šç„¡

---

#### F-4: åˆªé™¤é€£å‹•

**å•é¡Œ**ï¼šåˆªé™¤è«–æ–‡æ™‚ï¼Œé—œè¯çš„ Zettel å¡ç‰‡å¦‚ä½•è™•ç†ï¼Ÿ

**å»ºè­°**ï¼š

```python
# kb_manage.py delete æŒ‡ä»¤
def delete_paper(paper_id, cascade=False):
    if cascade:
        # åŒæ™‚åˆªé™¤é—œè¯å¡ç‰‡
        kb.delete_zettel_cards_by_paper(paper_id)
    else:
        # åƒ…åˆªé™¤è«–æ–‡ï¼Œå¡ç‰‡ä¿ç•™ï¼ˆæˆç‚ºå­¤ç«‹å¡ç‰‡ï¼‰
        pass

    kb.delete_paper(paper_id)
```

**CLI è¨­è¨ˆ**ï¼š

```bash
uv run kb delete 14                    # åƒ…åˆªè«–æ–‡ï¼Œå¡ç‰‡ä¿ç•™
uv run kb delete 14 --cascade          # é€£åŒå¡ç‰‡ä¸€èµ·åˆªé™¤
uv run kb delete 14 --cascade --force  # å¼·åˆ¶åˆªé™¤ï¼ˆä¸ç¢ºèªï¼‰
```

**å° G çš„å½±éŸ¿**ï¼šç„¡

---

### G: è‡ªè¨‚éœ€æ±‚æª”æ¡ˆæ”¯æ´

**è¨­è¨ˆæ±ºç­–**ï¼š

| å·¥å…· | æ–¹æ¡ˆ | åƒæ•¸è¨­è¨ˆ |
|------|------|---------|
| `make_slides.py` | 1 + 3 | `--custom-file` + é è¨­ `config/custom_slides.md` |
| `generate_zettel.py` | 2 | é è¨­ `config/custom_zettel.md`ï¼Œ`--no-custom` è·³é |

**å…±ç”¨æ¨¡çµ„**ï¼š

```python
# src/utils/prompt_loader.py

def load_custom_requirements(
    custom_arg: str = None,           # --custom å‘½ä»¤è¡Œå­—ä¸²
    custom_file_arg: str = None,      # --custom-file æª”æ¡ˆè·¯å¾‘
    default_file: str = None          # é è¨­æª”æ¡ˆè·¯å¾‘
) -> str | None:
    """
    å„ªå…ˆé †åºï¼š
    1. custom_file_argï¼ˆæ˜ç¢ºæŒ‡å®šæª”æ¡ˆï¼‰
    2. custom_argï¼ˆå‘½ä»¤è¡Œå­—ä¸²ï¼‰
    3. default_fileï¼ˆé è¨­æª”æ¡ˆï¼Œè‹¥å­˜åœ¨ï¼‰
    """
    ...
```

**å°å…¶ä»–èª²é¡Œçš„å½±éŸ¿**ï¼š

| èª²é¡Œ | å½±éŸ¿ | èªªæ˜ |
|------|------|------|
| D (ç¨ç«‹ zettel) | âœ… æ­£å‘ | ç¨ç«‹å¾Œå¯é‡å°æ€§è¨­è¨ˆ |
| E (å…¥åº«) | âšª ç„¡ | å…¥åº«èˆ‡æç¤ºèªç„¡é—œ |
| F-* | âšª ç„¡ | éƒ½æ˜¯ç”Ÿæˆå¾Œçš„è™•ç† |

---

## å››ã€å¯¦ä½œå„ªå…ˆé †åº

### Phase 1.0ï¼šæ ¸å¿ƒæ¶æ§‹ âœ… å®Œæˆ

```
Week 1: æ¶æ§‹æ±ºç­–èˆ‡åŸºç¤å»ºè¨­ âœ…
â”œâ”€â”€ D: å»ºç«‹ generate_zettel.pyï¼ˆå¾ make_slides.py åˆ†é›¢ï¼‰âœ…
â”œâ”€â”€ G: å¯¦ä½œè‡ªè¨‚éœ€æ±‚æª”æ¡ˆæ”¯æ´ âœ…
â”‚   â”œâ”€â”€ src/utils/prompt_loader.py âœ…
â”‚   â”œâ”€â”€ make_slides.py ä¿®æ”¹ âœ…
â”‚   â””â”€â”€ generate_zettel.py æ•´åˆ âœ…
â””â”€â”€ æ›´æ–° zettelkasten_template.jinja2ï¼ˆæ”¯æ´ custom_requirementsï¼‰âœ…

Week 2: çŸ¥è­˜åº«æ•´åˆ âœ…
â”œâ”€â”€ E: Zettel å…¥åº«æµç¨‹ âœ…
â”‚   â”œâ”€â”€ ç¢ºèª kb.add_zettel_card() å®Œæ•´æ€§ âœ…
â”‚   â”œâ”€â”€ æ•´åˆåˆ° generate_zettel.py âœ…
â”‚   â””â”€â”€ æ¸¬è©¦å…¥åº« â†’ æœç´¢æµç¨‹ âœ…
â”œâ”€â”€ F-1: æ›´æ–°æ©Ÿåˆ¶ï¼ˆæ··åˆç­–ç•¥ï¼šé è¨­è·³éé‡è¤‡ï¼Œ--force å¼·åˆ¶è¦†è“‹ï¼‰âœ…
â”œâ”€â”€ F-3: å‘é‡åµŒå…¥æ•´åˆ âœ…
â”œâ”€â”€ I: import-zettel / import-zettel-all æŒ‡ä»¤ âœ…
â”‚   â””â”€â”€ --bib åƒæ•¸ï¼ˆè‡ªå‹•å¾ BibTeX æ–°å¢ç¼ºå¤±è«–æ–‡ï¼‰âœ…
â””â”€â”€ J: å‘é‡è³‡æ–™åº«ç®¡ç† âœ…
    â”œâ”€â”€ vector-statusï¼ˆæª¢æŸ¥åŒæ­¥ç‹€æ…‹ï¼‰âœ…
    â”œâ”€â”€ vector-resetï¼ˆé‡ç½®å‘é‡åº«ï¼‰âœ…
    â”œâ”€â”€ vector-syncï¼ˆåŒæ­¥ SQLite â†’ å‘é‡åº«ï¼‰âœ…
    â””â”€â”€ vector-cleanupï¼ˆæ¸…ç†å­¤ç«‹å‘é‡ï¼‰âœ…
```

### Phase 1.1ï¼šä½¿ç”¨é«”é©—å„ªåŒ– âœ… å®Œæˆ

```
â”œâ”€â”€ A: --help æ ¼å¼çµ±ä¸€ âœ…
â”œâ”€â”€ B: ä¸»é¡Œåƒæ•¸æ”¹é¸å¡« âœ…ï¼ˆæ—©å·²å¯¦ä½œ nargs='?'ï¼‰
â”œâ”€â”€ C: é è¨­æ ¼å¼/è·¯å¾‘èª¿æ•´ âœ…
â””â”€â”€ F-4: åˆªé™¤é€£å‹• âœ…
    â”œâ”€â”€ export-zettel æŒ‡ä»¤ âœ…
    â”œâ”€â”€ delete äº’å‹•å¼ç¢ºèª+åŒ¯å‡ºæµç¨‹ âœ…
    â”œâ”€â”€ stats é¡¯ç¤ºå¾…å»ºç«‹å¡ç‰‡ âœ…
    â””â”€â”€ list --no-zettel åƒæ•¸ âœ…
```

### Phase 1.2ï¼šPDF å·¥å…·æ•´åˆ

```
â””â”€â”€ H: MarkItDown æ•´åˆï¼ˆRESUME_MEMO åŸæœ¬å¾…è¾¦ï¼‰
```

---

## äº”ã€é¢¨éšªè©•ä¼°

### ä½é¢¨éšªï¼ˆå¯å®‰å¿ƒå¯¦ä½œï¼‰

| èª²é¡Œ | é¢¨éšªç­‰ç´š | ç†ç”± |
|------|----------|------|
| G (è‡ªè¨‚éœ€æ±‚) | ğŸŸ¢ ä½ | ç´”æ–°å¢åŠŸèƒ½ï¼Œä¸æ”¹ç¾æœ‰é‚è¼¯ |
| A (--help) | ğŸŸ¢ ä½ | ç´”æ–‡å­—ä¿®æ”¹ |
| B (ä¸»é¡Œé¸å¡«) | ğŸŸ¢ ä½ | åƒæ•¸é è¨­å€¼èª¿æ•´ |
| C (é è¨­æ ¼å¼) | ğŸŸ¢ ä½ | å¯é€é config æ§åˆ¶ |

### ä¸­ç­‰é¢¨éšªï¼ˆéœ€è¬¹æ…æ¸¬è©¦ï¼‰

| èª²é¡Œ | é¢¨éšªç­‰ç´š | ç†ç”± | ç·©è§£æªæ–½ |
|------|----------|------|---------|
| D (ç¨ç«‹ zettel) | ğŸŸ¡ ä¸­ | ç¨‹å¼ç¢¼åˆ†é›¢ï¼Œå¯èƒ½éºæ¼é‚è¼¯ | å®Œæ•´æ¸¬è©¦æ¡ˆä¾‹ |
| E (å…¥åº«) | ğŸŸ¡ ä¸­ | è³‡æ–™åº«æ“ä½œï¼Œå¯èƒ½è³‡æ–™ä¸ä¸€è‡´ | äº¤æ˜“æ©Ÿåˆ¶ |
| F-1 (æ›´æ–°) | ğŸŸ¡ ä¸­ | åˆªé™¤æ“ä½œï¼Œå¯èƒ½èª¤åˆª | å‚™ä»½ + ç¢ºèª |

### éœ€æ³¨æ„

| èª²é¡Œ | æ³¨æ„äº‹é … |
|------|---------|
| F-4 (åˆªé™¤é€£å‹•) | éœ€æ˜ç¢ºå®šç¾©ã€Œå­¤ç«‹å¡ç‰‡ã€çš„è™•ç†ç­–ç•¥ |
| H (MarkItDown) | éœ€æ¸¬è©¦èˆ‡ pdfplumber çš„è¼¸å‡ºå·®ç•° |

---

## å…­ã€çµè«–

### G (è‡ªè¨‚éœ€æ±‚) èˆ‡å…¶ä»–èª²é¡Œçš„é—œä¿‚

```
âœ… G å¯ä»¥ç¨ç«‹å¯¦ä½œï¼Œä¸å—å…¶ä»–èª²é¡Œé˜»å¡
âœ… G èˆ‡ D é…åˆæœ€ä½³ï¼ˆç¨ç«‹å¾Œå¯é‡å°æ€§è¨­è¨ˆï¼‰
âœ… G å° E/F ç„¡å½±éŸ¿ï¼ˆå…¥åº«æ˜¯ç”Ÿæˆå¾Œçš„å‹•ä½œï¼‰
```

### å»ºè­°å¯¦ä½œé †åº

```
1. D + G åŒæ™‚é€²è¡Œ
   â”œâ”€â”€ D: åˆ†é›¢ generate_zettel.py
   â””â”€â”€ G: å¯¦ä½œ prompt_loader.py + æ•´åˆ

2. E: Zettel å…¥åº«ï¼ˆä¾è³´ D å®Œæˆï¼‰

3. F-1/F-2/F-3: ç´°ç¯€è™•ç†ï¼ˆä¾è³´ E å®Œæˆï¼‰

4. B/C/A: UX å„ªåŒ–ï¼ˆéš¨æ™‚å¯åšï¼‰

5. H: MarkItDownï¼ˆç¨ç«‹ï¼Œéš¨æ™‚å¯åšï¼‰
```

---

## ä¸ƒã€æ–°å¢èª²é¡Œï¼šç¾æœ‰ Zettel å¡ç‰‡åŒ¯å…¥ âœ… å®Œæˆ

### ç¾æ³ â†’ å·²è§£æ±º

```
output/zettelkasten_notes/
â”œâ”€â”€ zettel_Barsalou-1999_20251125_gemini_2.0_flash_exp/
â”œâ”€â”€ zettel_Adams-2020_20251123/
â”œâ”€â”€ ... (å…± 26 å€‹è«–æ–‡è³‡æ–™å¤¾ï¼Œ505 å¼µå¡ç‰‡)
â””â”€â”€ âœ… å·²å…¨æ•¸å…¥åº«ä¸¦åŒæ­¥è‡³å‘é‡è³‡æ–™åº«
```

### è§£æ±ºæ–¹æ¡ˆï¼š`uv run kb import-zettel` âœ… å·²å¯¦ä½œ

```bash
# åŒ¯å…¥å–®ä¸€è³‡æ–™å¤¾
uv run kb import-zettel output/zettelkasten_notes/zettel_Barsalou-1999_*/

# æ‰¹æ¬¡åŒ¯å…¥æ‰€æœ‰ç¾æœ‰å¡ç‰‡
uv run kb import-zettel-all

# æ‰¹æ¬¡åŒ¯å…¥ + è‡ªå‹•å¾ BibTeX æ–°å¢ç¼ºå¤±è«–æ–‡
uv run kb import-zettel-all --bib "path/to/My Library.bib"

# é è¦½æ¨¡å¼
uv run kb import-zettel-all --dry-run
```

### åŒ¯å…¥æµç¨‹

```
1. è®€å– zettel_index.md â†’ è§£æ cite_keyã€è«–æ–‡è³‡è¨Š
2. æ¯”å° papers è¡¨
   â”œâ”€â”€ æ‰¾åˆ° paper_id â†’ ä½¿ç”¨
   â””â”€â”€ æœªæ‰¾åˆ° â†’ è­¦å‘Š / å»ºç«‹æ–°è¨˜éŒ„
3. éæ­· zettel_cards/*.md
   â”œâ”€â”€ è§£æ YAML + Markdown
   â”œâ”€â”€ æå–é€£çµé—œä¿‚
   â””â”€â”€ å¯«å…¥ zettel_cards + zettel_links è¡¨
4. ç”Ÿæˆå‘é‡åµŒå…¥ï¼ˆ--embed é¸é …ï¼‰
```

### å¡ç‰‡æ¬„ä½å°ç…§

| Markdown å€å¡Š | è³‡æ–™åº«æ¬„ä½ |
|---------------|-----------|
| YAML `title` | `title` |
| YAML `summary` | `core_concept` |
| `## èªªæ˜` | `content` |
| `## é€£çµç¶²çµ¡` | â†’ `zettel_links` è¡¨ |
| `## ä¾†æºè„ˆçµ¡` | `source_info` |
| `ğŸ¤– AI:` | `ai_notes` |
| `âœï¸ Human:` | `human_notes` |
| `## å¾…è§£å•é¡Œ` | å¯å­˜å…¥ `description` æˆ–æ–°å¢æ¬„ä½ |

### å°å…¶ä»–èª²é¡Œçš„å½±éŸ¿

| èª²é¡Œ | å½±éŸ¿ |
|------|------|
| D (ç¨ç«‹ zettel) | âšª ç„¡ï¼ŒåŒ¯å…¥æ˜¯ç¨ç«‹åŠŸèƒ½ |
| E (å…¥åº«æ©Ÿåˆ¶) | âœ… å…±ç”¨ï¼Œå¯å…ˆå¯¦ä½œ E å†åšåŒ¯å…¥ |
| G (è‡ªè¨‚éœ€æ±‚) | âšª ç„¡ |

### å¯¦ä½œå„ªå…ˆç´š

**å»ºè­°æ”¾åœ¨ Phase 1.0 å¾ŒæœŸ**ï¼ˆE å®Œæˆå¾Œï¼‰

```
Phase 1.0 é †åºèª¿æ•´ï¼š
1. D: ç¨ç«‹ generate_zettel.py
2. G: è‡ªè¨‚éœ€æ±‚æª”æ¡ˆ
3. E: Zettel å…¥åº«æ©Ÿåˆ¶ â† å…ˆå®Œæˆé€™å€‹
4. I: import-zettel æŒ‡ä»¤ â† è¤‡ç”¨ E çš„å…¥åº«é‚è¼¯
```

---

## å…«ã€æª”æ¡ˆæ¸…å–®

### æ–°å¢æª”æ¡ˆ âœ…

| æª”æ¡ˆ | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|
| `generate_zettel.py` | Zettel ç”Ÿæˆ CLI | âœ… |
| `src/utils/prompt_loader.py` | è‡ªè¨‚éœ€æ±‚è¼‰å…¥æ¨¡çµ„ | âœ… |
| `src/utils/zettel_importer.py` | Zettel åŒ¯å…¥æ¨¡çµ„ | âœ… |
| `config/custom_slides.md` | æŠ•å½±ç‰‡é è¨­éœ€æ±‚ï¼ˆç¯„ä¾‹ï¼‰ | âœ… |
| `config/custom_zettel.md` | Zettel é è¨­éœ€æ±‚ï¼ˆç¯„ä¾‹ï¼‰ | âœ… |

### ä¿®æ”¹æª”æ¡ˆ âœ…

| æª”æ¡ˆ | ä¿®æ”¹å…§å®¹ | ç‹€æ…‹ |
|------|---------|------|
| `make_slides.py` | ç§»é™¤ zettelkasten é‚è¼¯ï¼Œæ–°å¢ `--custom-file` | âœ… |
| `templates/prompts/zettelkasten_template.jinja2` | æ–°å¢ `custom_requirements` å€å¡Š | âœ… |
| `pyproject.toml` | æ–°å¢ `zettel` CLI å…¥å£ | âœ… |
| `src/knowledge_base/kb_manager.py` | æ–°å¢ `delete_zettel_cards_by_paper/citekey` æ–¹æ³• | âœ… |
| `kb_manage.py` | æ–°å¢å‘é‡ç®¡ç†æŒ‡ä»¤ã€import-zettel æŒ‡ä»¤ | âœ… |
| `docs/CLI_GUIDE.md` | æ›´æ–°æŒ‡ä»¤èªªæ˜ | âœ… |

---

## ä¹ã€Phase 1.0 å®Œæˆç¸½çµ

### å·²å®ŒæˆåŠŸèƒ½

| åŠŸèƒ½ | æŒ‡ä»¤ | èªªæ˜ |
|------|------|------|
| Zettel ç”Ÿæˆ | `uv run zettel` | ç¨ç«‹ CLIï¼Œæ”¯æ´è‡ªè¨‚éœ€æ±‚ |
| è‡ªè¨‚éœ€æ±‚ | `--custom-file` | slides/zettel çš†æ”¯æ´ |
| Zettel åŒ¯å…¥ | `uv run kb import-zettel-all` | æ‰¹æ¬¡åŒ¯å…¥ç¾æœ‰å¡ç‰‡ |
| BibTeX æ•´åˆ | `--bib` åƒæ•¸ | è‡ªå‹•æ–°å¢ç¼ºå¤±è«–æ–‡ |
| å‘é‡åŒæ­¥ | `uv run kb vector-sync` | SQLite â†” ChromaDB åŒæ­¥ |
| å‘é‡ç‹€æ…‹ | `uv run kb vector-status` | æª¢æŸ¥åŒæ­¥ç‹€æ…‹ |
| å‘é‡é‡ç½® | `uv run kb vector-reset` | æ¸…ç©ºå‘é‡åº« |
| å‘é‡æ¸…ç† | `uv run kb vector-cleanup` | æ¸…ç†å­¤ç«‹å‘é‡ |

### v0.10.1 æ–°å¢åŠŸèƒ½ï¼ˆ2025-11-29ï¼‰

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| `import-zettel --bib` | å–®ä¸€åŒ¯å…¥ä¹Ÿæ”¯æ´ BibTeX åƒæ•¸ |
| é…ç½®æª”é è¨­ bib è·¯å¾‘ | `config/settings.yaml` â†’ `knowledge_base.bibliography.default_bib` |
| Unicode æ­£è¦åŒ–æ¯”å° | è‡ªå‹•åŒ¹é… `CrÃ©quit-2018` â†” `Crequit-2018`ï¼ˆÃ©â†’e, Ã¼â†’ue ç­‰ï¼‰|

### çŸ¥è­˜åº«ç¾æ³

```
ğŸ“Š çŸ¥è­˜åº«çµ±è¨ˆï¼ˆ2025-11-29ï¼‰
â”œâ”€â”€ è«–æ–‡ï¼š29 ç¯‡
â”œâ”€â”€ Zettel å¡ç‰‡ï¼š525 å¼µ
â”œâ”€â”€ å‘é‡åº«ï¼šå®Œå…¨åŒæ­¥ âœ…
â””â”€â”€ ä¾†æºï¼š27 å€‹ Zettel è³‡æ–™å¤¾
```

---

## åã€Phase 1.2ï¼šPDF å·¥å…·æ•´åˆï¼ˆMarkItDownï¼‰

### èª²é¡Œ Hï¼šMarkItDown æ•´åˆ

**ç¾æ³**ï¼šç›®å‰ä½¿ç”¨ `pdfplumber` æå– PDF æ–‡æœ¬

**MarkItDown å„ªå‹¢**ï¼š
- Microsoft é–‹æºå·¥å…·
- æ”¯æ´å¤šç¨®æ ¼å¼ï¼ˆPDFã€Wordã€Excelã€PowerPointã€åœ–ç‰‡ï¼‰
- æ›´å¥½çš„è¡¨æ ¼/åœ–ç‰‡è™•ç†
- Markdown è¼¸å‡ºæ›´çµæ§‹åŒ–

### æ•´åˆæ–¹æ¡ˆï¼šå‚™é¸æ¨¡å¼ + åœ–è¡¨æ™ºæ…§è™•ç†

**è¨­è¨ˆåŸå‰‡**ï¼š
1. **pdfplumber ç‚ºä¸»** - è¡¨æ ¼è™•ç†å„ªç§€ï¼Œä¿æŒç¾æœ‰ç©©å®šæ€§
2. **MarkItDown å‚™é¸** - è™•ç† Word/PPT ç­‰æ ¼å¼ï¼Œæˆ–éœ€è¦ LLM æè¿°åœ–ç‰‡æ™‚
3. **åœ–è¡¨ä¾†æºæå–** - å­¸è¡“è«–æ–‡å¸¸é™„å¸¶é‡è£½ç¨‹å¼ç¢¼æˆ–è³‡æ–™ä¾†æº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PDF è¼¸å…¥                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  pdfplumber   â”‚   â”‚  MarkItDown   â”‚   â”‚  --figure-mode â”‚
â”‚  (é è¨­/è¡¨æ ¼)   â”‚   â”‚  (å‚™é¸/å¤šæ ¼å¼) â”‚   â”‚  (åœ–è¡¨è™•ç†)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   custom_file.md  â”‚ â† ä½¿ç”¨è€…æŒ‡å° LLM å¦‚ä½•è™•ç†
                â”‚   (åœ–è¡¨è™•ç†æŒ‡å¼•)   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   LLM ç”Ÿæˆçµæœ     â”‚
                â”‚  (slides/zettel)  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CLI åƒæ•¸è¨­è¨ˆ

```bash
# åŸºæœ¬åƒæ•¸
--extractor {pdfplumber|markitdown|auto}  # é è¨­ï¼špdfplumber

# åœ–è¡¨è™•ç†æ¨¡å¼
--figure-mode {skip|position|describe|source}
  # skip     - å¿½ç•¥åœ–è¡¨ï¼ˆåƒ…æå–æ–‡å­—ï¼‰
  # position - æ¨™è¨˜ä½ç½®ï¼ˆå¦‚ "[Figure 1 here]"ï¼‰
  # describe - LLM æè¿°åœ–ç‰‡å…§å®¹ï¼ˆéœ€ GPT-4V/Gemini Visionï¼‰
  # source   - æå–é‡è£½ç¨‹å¼ç¢¼/è³‡æ–™ä¾†æº URLï¼ˆå­¸è¡“è«–æ–‡å¸¸è¦‹ï¼‰

# è¡¨æ ¼é è™•ç†æ ¼å¼
--table-format {raw|markdown|json}
  # raw      - åŸå§‹æ–‡å­—ï¼ˆé è¨­ï¼Œä¸ç‰¹åˆ¥è™•ç†ï¼‰
  # markdown - è½‰æ›ç‚º Markdown è¡¨æ ¼æ ¼å¼
  # json     - è½‰æ›ç‚º JSON é™£åˆ—æ ¼å¼ï¼ˆé©åˆçµæ§‹åŒ–åˆ†æï¼‰
```

### ä½¿ç”¨ç¯„ä¾‹

```bash
# ç¯„ä¾‹ 1ï¼šæ¨™æº–è«–æ–‡è™•ç†ï¼ˆpdfplumber + æ¨™è¨˜åœ–è¡¨ä½ç½®ï¼‰
uv run zettel --pdf paper.pdf --figure-mode position

# ç¯„ä¾‹ 5ï¼šè¡¨æ ¼è½‰ Markdown å¾Œè™•ç†ï¼ˆé©åˆç°¡å ±ç”Ÿæˆï¼‰
uv run slides "çµ±è¨ˆçµæœ" --pdf paper.pdf --table-format markdown

# ç¯„ä¾‹ 6ï¼šè¡¨æ ¼è½‰ JSON å¾Œè™•ç†ï¼ˆé©åˆæ•¸æ“šå¡ç‰‡ï¼‰
uv run zettel --pdf paper.pdf --table-format json --custom-file config/custom_table_json.md

# ç¯„ä¾‹ 2ï¼šéœ€è¦åœ–ç‰‡æè¿°ï¼ˆMarkItDown + LLM Visionï¼‰
uv run slides "ä¸»é¡Œ" --pdf paper.pdf --extractor markitdown --figure-mode describe

# ç¯„ä¾‹ 3ï¼šæå–åœ–è¡¨ä¾†æºç¢¼ï¼ˆæ­é…è‡ªè¨‚æç¤ºè©ï¼‰
uv run zettel --pdf paper.pdf --figure-mode source --custom-file config/custom_figure_source.md

# ç¯„ä¾‹ 4ï¼šWord æ–‡ä»¶è™•ç†ï¼ˆå¿…é ˆç”¨ MarkItDownï¼‰
uv run slides "ä¸»é¡Œ" --pdf report.docx --extractor markitdown
```

### è‡ªè¨‚æç¤ºè©ç¯„ä¾‹

#### config/custom_figure_source.mdï¼ˆåœ–è¡¨ä¾†æºæå–ï¼‰

```markdown
## åœ–è¡¨è™•ç†æŒ‡å¼•

### Figure è™•ç†
ç•¶é‡åˆ°è«–æ–‡ä¸­çš„ Figure æ™‚ï¼Œè«‹ï¼š
1. æ‰¾å‡ºè©² Figure çš„æ¨™é¡Œå’Œç·¨è™Ÿ
2. æª¢æŸ¥æ˜¯å¦æœ‰ä»¥ä¸‹ä¾†æºè³‡è¨Šï¼š
   - Data availability statementï¼ˆè³‡æ–™å¯ç”¨æ€§è²æ˜ï¼‰
   - Supplementary materialsï¼ˆè£œå……ææ–™é€£çµï¼‰
   - GitHub/OSF/Zenodo ç­‰ç¨‹å¼ç¢¼å€‰åº«é€£çµ
   - "Data and code available at..." ç­‰æè¿°
3. è‹¥æœ‰é‡è£½ç¨‹å¼ç¢¼ï¼ˆR/Pythonï¼‰ï¼Œæ¨™è¨˜èªè¨€å’Œé—œéµå¥—ä»¶

### Table è™•ç†
ç•¶é‡åˆ°è«–æ–‡ä¸­çš„ Table æ™‚ï¼Œè«‹ï¼š
1. ä¿ç•™å®Œæ•´çš„è¡¨æ ¼çµæ§‹å’Œæ•¸æ“š
2. æª¢æŸ¥è¡¨æ ¼è¨»è…³ä¸­çš„è³‡æ–™ä¾†æºèªªæ˜
3. è‹¥è¡¨æ ¼ä¾†è‡ªå¤–éƒ¨è³‡æ–™åº«ï¼Œè¨˜éŒ„è³‡æ–™åº«åç¨±å’Œå­˜å–æ–¹å¼

### è¼¸å‡ºæ ¼å¼
å°æ¯å€‹åœ–è¡¨ï¼Œç”Ÿæˆä»¥ä¸‹è³‡è¨Šï¼š
- ç·¨è™Ÿï¼šFigure X / Table X
- æ¨™é¡Œï¼šåŸå§‹æ¨™é¡Œ
- ä¾†æºé¡å‹ï¼šåŸå‰µ/é‡è£½/å¤–éƒ¨è³‡æ–™
- ä¾†æºé€£çµï¼šURLï¼ˆè‹¥æœ‰ï¼‰
- é‡è£½éœ€æ±‚ï¼šæ‰€éœ€å¥—ä»¶/è³‡æ–™ï¼ˆè‹¥æœ‰ï¼‰
```

#### config/custom_figure_describe.mdï¼ˆåœ–ç‰‡ LLM æè¿°ï¼‰

```markdown
## åœ–ç‰‡æè¿°æŒ‡å¼•

ç•¶è™•ç†è«–æ–‡ä¸­çš„åœ–ç‰‡æ™‚ï¼Œè«‹ä»¥å­¸è¡“è§’åº¦æè¿°ï¼š

### çµ±è¨ˆåœ–è¡¨
- åœ–è¡¨é¡å‹ï¼ˆæ•£é»åœ–/é•·æ¢åœ–/ç®±å½¢åœ–ç­‰ï¼‰
- X/Y è»¸è®Šæ•¸åç¨±å’Œå–®ä½
- ä¸»è¦ç™¼ç¾ï¼ˆè¶¨å‹¢/å·®ç•°/ç›¸é—œæ€§ï¼‰
- çµ±è¨ˆé¡¯è‘—æ€§æ¨™è¨˜ï¼ˆè‹¥æœ‰ï¼‰

### æµç¨‹åœ–/æ¶æ§‹åœ–
- ä¸»è¦å…ƒä»¶å’Œæ­¥é©Ÿ
- è³‡æ–™/æ§åˆ¶æµå‘
- é—œéµæ±ºç­–é»

### å¯¦é©—ç¤ºæ„åœ–
- å¯¦é©—è¨­è¨ˆæ¦‚è¿°
- åˆºæ¿€ææ–™æè¿°
- æ™‚é–“åºåˆ—ï¼ˆè‹¥æœ‰ï¼‰

è«‹ç”¨ç¹é«”ä¸­æ–‡æè¿°ï¼Œä¿æŒå­¸è¡“ç²¾ç¢ºæ€§ã€‚
```

### å¯¦ä½œè¦åŠƒ

#### æ–°å¢æª”æ¡ˆ

```
src/extractors/
â”œâ”€â”€ pdf_extractor.py         # ç¾æœ‰ï¼ˆpdfplumberï¼‰
â”œâ”€â”€ markitdown_extractor.py  # æ–°å¢ï¼ˆMarkItDownï¼‰
â”œâ”€â”€ figure_handler.py        # æ–°å¢ï¼ˆåœ–è¡¨è™•ç†é‚è¼¯ï¼‰
â”œâ”€â”€ table_formatter.py       # æ–°å¢ï¼ˆè¡¨æ ¼æ ¼å¼è½‰æ›ï¼‰
â””â”€â”€ __init__.py              # æ›´æ–° exports

config/
â”œâ”€â”€ custom_figure_source.md   # ç¯„ä¾‹ï¼šåœ–è¡¨ä¾†æºæå– âœ…
â”œâ”€â”€ custom_figure_describe.md # ç¯„ä¾‹ï¼šåœ–ç‰‡ LLM æè¿° âœ…
â”œâ”€â”€ custom_table_json.md      # ç¯„ä¾‹ï¼šJSON è¡¨æ ¼è™•ç† âœ…
â”œâ”€â”€ custom_table_markdown.md  # ç¯„ä¾‹ï¼šMarkdown è¡¨æ ¼è™•ç† âœ…
â””â”€â”€ custom_markitdown.md      # ç¯„ä¾‹ï¼šMarkItDown é€šç”¨
```

### è¡¨æ ¼é è™•ç†è©³ç´°èªªæ˜

#### è¼¸å…¥è¼¸å‡ºç¯„ä¾‹

**åŸå§‹ PDF è¡¨æ ¼**ï¼ˆrawï¼‰ï¼š
```
Variable    Group A    Group B    p-value
Age         25.3Â±4.2   24.8Â±3.9   0.42
Score       82.1Â±12.3  78.5Â±11.8  0.03*
```

**Markdown æ ¼å¼**ï¼ˆ`--table-format markdown`ï¼‰ï¼š
```markdown
| Variable | Group A | Group B | p-value |
|----------|---------|---------|---------|
| Age | 25.3Â±4.2 | 24.8Â±3.9 | 0.42 |
| Score | 82.1Â±12.3 | 78.5Â±11.8 | 0.03* |
```

**JSON æ ¼å¼**ï¼ˆ`--table-format json`ï¼‰ï¼š
```json
{
  "table_id": "Table 1",
  "caption": "Descriptive Statistics",
  "headers": ["Variable", "Group A", "Group B", "p-value"],
  "rows": [
    {"Variable": "Age", "Group A": "25.3Â±4.2", "Group B": "24.8Â±3.9", "p-value": "0.42"},
    {"Variable": "Score", "Group A": "82.1Â±12.3", "Group B": "78.5Â±11.8", "p-value": "0.03*"}
  ],
  "footnotes": ["* p < 0.05"]
}
```

### å¾…å¯¦ä½œæ­¥é©Ÿ

| # | æ­¥é©Ÿ | èªªæ˜ | ç‹€æ…‹ |
|---|------|------|------|
| 1 | å»ºç«‹ç¯„ä¾‹ custom æª”æ¡ˆ | åœ–è¡¨/è¡¨æ ¼è™•ç†æŒ‡å¼•ç¯„æœ¬ | âœ… å®Œæˆ |
| 2 | å®‰è£ MarkItDown | `uv add markitdown` | â³ å¾…è¾¦ |
| 3 | å»ºç«‹ markitdown_extractor.py | å¯¦ä½œ MarkItDownExtractor | â³ å¾…è¾¦ |
| 4 | å»ºç«‹ figure_handler.py | åœ–è¡¨åµæ¸¬èˆ‡è™•ç†é‚è¼¯ | â³ å¾…è¾¦ |
| 5 | å»ºç«‹ table_formatter.py | è¡¨æ ¼æ ¼å¼è½‰æ›ï¼ˆMD/JSONï¼‰| â³ å¾…è¾¦ |
| 6 | CLI æ–°å¢åƒæ•¸ | `--extractor` + `--figure-mode` + `--table-format` | â³ å¾…è¾¦ |
| 7 | æ•´åˆ LLM Vision | GPT-4V / Gemini Vision æ”¯æ´ | â³ å¾…è¾¦ |
| 8 | æ¸¬è©¦èˆ‡æ–‡æª”æ›´æ–° | å„ç¨®æ–‡ä»¶æ ¼å¼é©—è­‰ | â³ å¾…è¾¦ |

---

## åä¸€ã€å¾ŒçºŒå„ªåŒ–é …ç›®

### P1 å„ªå…ˆ

| é …ç›® | èªªæ˜ | è¤‡é›œåº¦ |
|------|------|--------|
| `--from-bib` æ‰¹æ¬¡ | å¾æ›¸ç›®æª”æ‰¹æ¬¡ç”Ÿæˆ Zettel | ä¸­ |
| è·¨è«–æ–‡é€£çµå¼·åŒ– | è‡ªå‹•è­˜åˆ¥ç›¸åŒæ¦‚å¿µã€å»ºç«‹é›™å‘é€£çµ | é«˜ |

### P2 æ¬¡è¦

| é …ç›® | èªªæ˜ | è¤‡é›œåº¦ |
|------|------|--------|
| èªç¾©æœç´¢ UI | äº’å‹•å¼æœç´¢ä»‹é¢ | ä¸­ |
| Zettel å“è³ªæª¢æŸ¥ | è‡ªå‹•æª¢æ¸¬å…§å®¹å®Œæ•´æ€§ | ä½ |
| åŒ¯å‡ºæ ¼å¼æ“´å…… | Notion/Logseq æ ¼å¼æ”¯æ´ | ä¸­ |

### P3 é•·æœŸ

| é …ç›® | èªªæ˜ | è¤‡é›œåº¦ |
|------|------|--------|
| Web UI | ç€è¦½å™¨ä»‹é¢ | é«˜ |
| æ¦‚å¿µç¶²çµ¡è¦–è¦ºåŒ– | D3.js / Obsidian Canvas | é«˜ |
| å¤šèªè¨€æ‘˜è¦ | è‡ªå‹•ç”Ÿæˆè‹±æ–‡/æ—¥æ–‡ç‰ˆæœ¬ | ä¸­ |

---

**ç•¶å‰ç‰ˆæœ¬**ï¼š0.10.1
**ä¸‹ä¸€æ­¥**ï¼šPhase 1.2 - MarkItDown æ•´åˆ


# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## å°ˆæ¡ˆæ¦‚è¿°

**çŸ¥è­˜ç”Ÿç”¢å™¨ (Knowledge Production System)** æ˜¯ä¸€å€‹ä»¥Claude Codeç‚ºæ ¸å¿ƒã€Agentsèˆ‡Skillsé©…å‹•çš„å­¸è¡“æ–‡ç»è™•ç†ç³»çµ±ã€‚æ•´åˆäº†SciMakerçš„Journal Clubèƒ½åŠ›ï¼Œæ”¯æ´å¤šæ ¼å¼è¼¸å…¥è¼¸å‡ºèˆ‡æ··åˆå¼çŸ¥è­˜åº«ç®¡ç†ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **Agenté©…å‹•**: æ™ºèƒ½ä»£ç†è‡ªå‹•åŒ–æ–‡ç»åˆ†æå’ŒçŸ¥è­˜æ•´åˆ
- ğŸ› ï¸ **Skillsæ¨¡çµ„åŒ–**: å¯é‡ç”¨çš„æŠ€èƒ½çµ„ä»¶ï¼ˆPDFæå–ã€ç°¡å ±ç”Ÿæˆã€ç­†è¨˜æ’°å¯«ï¼‰
- ğŸ“š **æ··åˆå¼çŸ¥è­˜åº«**: Markdownæ–‡ä»¶ + SQLiteç´¢å¼• + å…¨æ–‡æœç´¢
- ğŸ¨ **å¤šé¢¨æ ¼è¼¸å‡º**: 8ç¨®å­¸è¡“é¢¨æ ¼ Ã— 5ç¨®è©³ç´°ç¨‹åº¦ Ã— 3ç¨®èªè¨€
- ğŸ¤– **å¤šLLMæ”¯æŒ**: Ollamaã€Google Geminiã€OpenAIã€Anthropic Claude
- ğŸ”— **å¯æ“´å±•æ¶æ§‹**: é ç•™èˆ‡å…¶ä»–å°ˆæ¡ˆä¸²æ¥çš„ä»‹é¢

## å°ˆæ¡ˆæ¶æ§‹

```
claude_lit_workflow/
â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ skills/              # æ ¸å¿ƒSkills
â”‚   â”‚   â”œâ”€â”€ pdf-extractor.md     âœ…
â”‚   â”‚   â”œâ”€â”€ slide-maker.md       âœ…
â”‚   â”‚   â”œâ”€â”€ batch-processor.md   âœ… NEW
â”‚   â”‚   â”œâ”€â”€ note-writer.md       (å¾…å¯¦ä½œ)
â”‚   â”‚   â”œâ”€â”€ viz-generator.md     (å¾…å¯¦ä½œ)
â”‚   â”‚   â””â”€â”€ kb-connector.md      âœ…
â”‚   â”œâ”€â”€ agents/              # 3å€‹æ™ºèƒ½Agents (å¾…å¯¦ä½œ)
â”‚   â”‚   â”œâ”€â”€ literature-analyzer/
â”‚   â”‚   â”œâ”€â”€ knowledge-integrator/
â”‚   â”‚   â””â”€â”€ research-assistant/
â”‚   â””â”€â”€ commands/            # Slash Commands
â”‚       â””â”€â”€ analyze-paper.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extractors/          # æå–å™¨æ¨¡çµ„
â”‚   â”‚   â””â”€â”€ pdf_extractor.py
â”‚   â”œâ”€â”€ generators/          # ç”Ÿæˆå™¨æ¨¡çµ„
â”‚   â”‚   â””â”€â”€ slide_maker.py   âœ… å¤šLLMæ”¯æŒçš„æŠ•å½±ç‰‡ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ processors/          # æ‰¹æ¬¡è™•ç†æ¨¡çµ„ âœ… NEW
â”‚   â”‚   â”œâ”€â”€ batch_processor.py
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ checkers/            # è³ªé‡æª¢æŸ¥æ¨¡çµ„ âœ… NEW
â”‚   â”‚   â”œâ”€â”€ quality_checker.py
â”‚   â”‚   â”œâ”€â”€ quality_rules.yaml
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ knowledge_base/      # çŸ¥è­˜åº«ç®¡ç†
â”‚   â”‚   â””â”€â”€ kb_manager.py
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•¸
â”‚       â”œâ”€â”€ session_organizer.py  âœ… æª”æ¡ˆæ•´ç†å·¥å…·
â”‚       â”œâ”€â”€ cleanup_rules.yaml
â”‚       â””â”€â”€ __init__.py
â”œâ”€â”€ knowledge_base/          # çŸ¥è­˜å„²å­˜å€
â”‚   â”œâ”€â”€ papers/              # Markdownè«–æ–‡ç­†è¨˜
â”‚   â”œâ”€â”€ metadata/            # å…ƒæ•¸æ“š
â”‚   â””â”€â”€ index.db             # SQLiteæ•¸æ“šåº«
â”œâ”€â”€ templates/               # æ¨¡æ¿åº«
â”‚   â”œâ”€â”€ prompts/             # Promptæ¨¡æ¿ï¼ˆåŸºæ–¼Journal Clubï¼‰
â”‚   â”‚   â”œâ”€â”€ raw_templates.txt
â”‚   â”‚   â””â”€â”€ journal_club_template.jinja2
â”‚   â””â”€â”€ styles/              # å­¸è¡“é¢¨æ ¼å®šç¾©
â”‚       â””â”€â”€ academic_styles.yaml
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.yaml        # ç³»çµ±é…ç½®
â”œâ”€â”€ batch_process.py         # æ‰¹æ¬¡è™•ç†CLI âœ… NEW
â”œâ”€â”€ check_quality.py         # è³ªé‡æª¢æŸ¥CLI âœ… NEW
â”œâ”€â”€ cleanup_session.py       # æª”æ¡ˆæ•´ç†CLI âœ… NEW
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## æŠ€è¡“æ£§

- **Python 3.10+**: ä¸»è¦é–‹ç™¼èªè¨€
- **Claude Code**: AIé©…å‹•çš„é–‹ç™¼ç’°å¢ƒ
- **Ollama**: æœ¬åœ°LLMæ¨ç†ï¼ˆæ•´åˆè‡ªSciMakerï¼‰
- **SQLite**: è¼•é‡ç´šæ•¸æ“šåº«ï¼ˆçŸ¥è­˜åº«ç´¢å¼•ï¼‰
- **Jinja2**: Promptæ¨¡æ¿å¼•æ“
- **PyPDF2/pdfplumber**: PDFè™•ç†
- **python-pptx**: PowerPointç”Ÿæˆ

## å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒè¨­ç½®

**ç¯„ä¾‹**: [examples/quickstart/setup_environment.sh](examples/quickstart/setup_environment.sh)

### 2. åŸºæœ¬ä½¿ç”¨

**ç¯„ä¾‹**: [examples/quickstart/basic_usage.sh](examples/quickstart/basic_usage.sh)

### 3. çŸ¥è­˜åº«æŸ¥è©¢

**ç¯„ä¾‹**: [examples/quickstart/kb_query.py](examples/quickstart/kb_query.py)

## æ ¸å¿ƒæ¨¡çµ„èªªæ˜

### PDFæå–å™¨ (src/extractors/pdf_extractor.py)

**åŠŸèƒ½**: å¾PDFæå–æ–‡æœ¬ã€çµæ§‹å’Œå…ƒæ•¸æ“š

**ç¯„ä¾‹**: [examples/pdf_extraction/extract_pdf.py](examples/pdf_extraction/extract_pdf.py)

**ç‰¹æ€§**:
- æ”¯æ´å…©ç¨®æå–æ–¹æ³•ï¼špdfplumberï¼ˆæ¨è–¦ï¼‰å’ŒPyPDF2
- å­—å…ƒé™åˆ¶ï¼š50,000ï¼ˆJournal Clubçš„5å€ï¼‰
- è‡ªå‹•è­˜åˆ¥ï¼šæ¨™é¡Œã€ä½œè€…ã€æ‘˜è¦ã€ç« ç¯€ã€é—œéµè©
- è¼¸å‡ºJSONæ ¼å¼çš„çµæ§‹åŒ–æ•¸æ“š

**é…ç½®**: `config/settings.yaml` â†’ `pdf` section

### çŸ¥è­˜åº«ç®¡ç†å™¨ (src/knowledge_base/kb_manager.py)

**åŠŸèƒ½**: æ··åˆå¼çŸ¥è­˜åº«ç®¡ç†ï¼ˆMarkdown + SQLiteï¼‰

**ç¯„ä¾‹**: [examples/knowledge_base/kb_management.py](examples/knowledge_base/kb_management.py)

**æ•¸æ“šåº«çµæ§‹**:
- `papers`: è«–æ–‡å…ƒæ•¸æ“š
- `topics`: ä¸»é¡Œåˆ†é¡
- `paper_topics`: è«–æ–‡-ä¸»é¡Œé—œè¯
- `citations`: å¼•ç”¨é—œä¿‚
- `papers_fts`: å…¨æ–‡æœç´¢ç´¢å¼•ï¼ˆFTS5ï¼‰

**é…ç½®**: `config/settings.yaml` â†’ `knowledge_base` section

### æ‰¹æ¬¡è™•ç†å™¨ (src/processors/batch_processor.py) âœ… NEW

**åŠŸèƒ½**: ç©©å®šåœ°æ‰¹æ¬¡è™•ç†å¤§é‡PDFæ–‡ä»¶ï¼Œæ”¯æ´çŸ¥è­˜åº«å’ŒZettelkastenç”Ÿæˆ

**CLI ç¯„ä¾‹**: [examples/batch_processing/batch_cli_usage.sh](examples/batch_processing/batch_cli_usage.sh)

**Python API ç¯„ä¾‹**: [examples/batch_processing/batch_api_usage.py](examples/batch_processing/batch_api_usage.py)

**æ ¸å¿ƒç‰¹æ€§**:
- **å¹³è¡Œè™•ç†**: ThreadPoolExecutoræ”¯æ´å¤šå·¥è™•ç†ï¼ˆé è¨­3å€‹workerï¼‰
- **ç©©å®šæ€§ä¿è­‰**: å®Œæ•´çš„éŒ¯èª¤è™•ç†å’Œtimeoutæ©Ÿåˆ¶ï¼ˆ300ç§’/PDFï¼‰
- **Windowsè·¯å¾‘æ”¯æ´**: pathlib.Pathæ­£ç¢ºè™•ç†ä¸­æ–‡å’Œç‰¹æ®Šå­—å…ƒ
- **é€²åº¦è¿½è¹¤**: å¯¦æ™‚é¡¯ç¤ºè™•ç†é€²åº¦ `[1/15] âœ… Paper1.pdf`
- **éŒ¯èª¤ç­–ç•¥**: skipï¼ˆè·³éï¼‰ã€retryï¼ˆé‡è©¦ï¼‰ã€stopï¼ˆåœæ­¢ï¼‰ä¸‰ç¨®æ¨¡å¼
- **æ•´åˆæ¸…ç†**: è™•ç†å®Œæˆå¾Œå¯è‡ªå‹•åŸ·è¡Œæª”æ¡ˆæ•´ç†

**æ•¸æ“šçµæ§‹**:
- `ProcessResult`: å–®å€‹æ–‡ä»¶è™•ç†çµæœï¼ˆæˆåŠŸ/å¤±æ•—ã€paper_idã€éŒ¯èª¤ä¿¡æ¯ï¼‰
- `BatchResult`: æ‰¹æ¬¡è™•ç†ç¸½çµï¼ˆç¸½æ•¸ã€æˆåŠŸæ•¸ã€å¤±æ•—æ•¸ã€è™•ç†æ™‚é–“ã€å ±å‘Šï¼‰

**é…ç½®åƒæ•¸**:
| åƒæ•¸ | èªªæ˜ | é»˜èªå€¼ |
|------|------|--------|
| `--workers` | å¹³è¡Œè™•ç†çš„åŸ·è¡Œç·’æ•¸ | 3 |
| `--error-handling` | éŒ¯èª¤è™•ç†ç­–ç•¥ | skip |
| `--domain` | é ˜åŸŸä»£ç¢¼ï¼ˆCogSci/Linguistics/AIï¼‰ | Research |
| `--add-to-kb` | åŠ å…¥çŸ¥è­˜åº« | False |
| `--generate-zettel` | ç”ŸæˆZettelkasten | False |
| `--report` | å ±å‘Šè¼¸å‡ºè·¯å¾‘ | - |

**æ•ˆèƒ½æŒ‡æ¨™**:
- å–®å€‹PDFè™•ç†æ™‚é–“ï¼š30-120ç§’ï¼ˆå–æ±ºæ–¼å¤§å°å’ŒLLMé€Ÿåº¦ï¼‰
- å»ºè­°workeræ•¸ï¼š2-4å€‹ï¼ˆé¿å…API rate limitingï¼‰
- è¨˜æ†¶é«”ä½¿ç”¨ï¼šç´„100MB + 50MB/worker

**è©³ç´°èªªæ˜**: `.claude/skills/batch-processor.md`

### è³ªé‡æª¢æŸ¥å™¨ (src/checkers/quality_checker.py) âœ… NEW

**åŠŸèƒ½**: æª¢æŸ¥çŸ¥è­˜åº«ä¸­è«–æ–‡çš„å…ƒæ•¸æ“šè³ªé‡ï¼Œæª¢æ¸¬å•é¡Œä¸¦æä¾›ä¿®å¾©å»ºè­°

**CLI ç¯„ä¾‹**: [examples/quality_checker/quality_check_cli.sh](examples/quality_checker/quality_check_cli.sh)

**Python API ç¯„ä¾‹**: [examples/quality_checker/quality_check_api.py](examples/quality_checker/quality_check_api.py)

**æª¢æŸ¥é …ç›®**:

**1. æ¨™é¡Œæª¢æŸ¥**:
- âŒ ç„¡æ•ˆæ¨¡å¼ï¼š`Journal Pre-proof`ã€`Untitled`ã€URLã€ç©ºç™½
- âš ï¸ å¯ç–‘æ¨¡å¼ï¼šåŒ…å«`.pdf`ã€ç‰ˆæœ¬æ¨™è¨˜ã€éçŸ­/éé•·
- âœ… å“è³ªæŒ‡æ¨™ï¼š10-300å­—å…ƒï¼Œå»ºè­°20-200å­—å…ƒ

**2. ä½œè€…æª¢æŸ¥**:
- âŒ ç„¡æ•ˆæ¨¡å¼ï¼š`Unknown`ã€`N/A`ã€`Author 1`ã€ç©ºç™½
- âš ï¸ æ ¼å¼å•é¡Œï¼šç¼ºå°‘å§“åã€ç‰¹æ®Šå­—å…ƒã€å¤§å°å¯«éŒ¯èª¤
- âœ… å“è³ªæŒ‡æ¨™ï¼š1-50ä½ä½œè€…

**3. å¹´ä»½æª¢æŸ¥**:
- âŒ åš´é‡å•é¡Œï¼šç¼ºå°‘å¹´ä»½ã€è¶…å‡ºç¯„åœï¼ˆ1900-2030ï¼‰
- âš ï¸ å¯ç–‘ï¼šéæ–¼å¤è€ï¼ˆ<1950ï¼‰ã€éæ–¼æœªä¾†ï¼ˆ>ç•¶å‰å¹´+2ï¼‰

**4. æ‘˜è¦æª¢æŸ¥**:
- âŒ åš´é‡å•é¡Œï¼šç©ºç™½ã€ä½”ä½ç¬¦ï¼ˆ`å°šæœªæä¾›æ‘˜è¦`ï¼‰ã€éçŸ­ï¼ˆ<50å­—å…ƒï¼‰
- âš ï¸ è­¦å‘Šï¼šåçŸ­ï¼ˆ<100å­—å…ƒï¼‰ã€éé•·ï¼ˆ>5000å­—å…ƒï¼‰ã€å…§å®¹ä¸è¶³ï¼ˆ<20å­—ï¼‰
- âœ… å»ºè­°é•·åº¦ï¼š100-2000å­—å…ƒ

**5. é—œéµè©æª¢æŸ¥**:
- âŒ è­¦å‘Šï¼šæ•¸é‡ä¸è¶³ï¼ˆ<1å€‹ï¼‰ã€éå¤šï¼ˆ>20å€‹ï¼‰
- âš ï¸ æ ¼å¼å•é¡Œï¼šç©ºå­—ä¸²ã€é‡è¤‡ã€é•·åº¦ä¸åˆç†
- âœ… å»ºè­°æ•¸é‡ï¼š3-10å€‹

**è³ªé‡è©•åˆ†ç³»çµ±**:
```
è©•åˆ†æ¬Šé‡:
  - æ¨™é¡Œ: 25%
  - ä½œè€…: 20%
  - å¹´ä»½: 15%
  - æ‘˜è¦: 25%
  - é—œéµè©: 15%

è³ªé‡ç­‰ç´š:
  - å„ªç§€ â­â­â­â­â­: 90-100åˆ†
  - è‰¯å¥½ â­â­â­â­: 75-89åˆ†
  - å¯æ¥å— â­â­â­: 60-74åˆ†
  - è¼ƒå·® â­â­: 40-59åˆ†
  - åš´é‡å•é¡Œ â­: 0-39åˆ†
```

**é‡è¤‡æª¢æ¸¬æ¼”ç®—æ³•**:
```
ç›¸ä¼¼åº¦è¨ˆç®—:
  - æ¨™é¡Œç›¸ä¼¼åº¦: 60% (SequenceMatcher)
  - ä½œè€…é‡ç–Šåº¦: 30% (é›†åˆäº¤é›†/è¯é›†)
  - å¹´ä»½ç›¸ä¼¼åº¦: 10% (å¹´ä»½å·®ç•°å®¹å¿åº¦)

é–¾å€¼å»ºè­°:
  - 0.95-1.0: æ¥µå¯èƒ½é‡è¤‡ï¼ˆå»ºè­°åˆä½µï¼‰
  - 0.85-0.94: é«˜åº¦ç›¸ä¼¼ï¼ˆéœ€äººå·¥æª¢æŸ¥ï¼‰
  - 0.70-0.84: ä¸­åº¦ç›¸ä¼¼ï¼ˆå¯èƒ½ç›¸é—œè«–æ–‡ï¼‰
```

**è‡ªå‹•ä¿®å¾©åŠŸèƒ½** (é–‹ç™¼ä¸­):
- å¾PDFå…§å®¹æå–æ¨™é¡Œã€ä½œè€…ã€å¹´ä»½
- ä½¿ç”¨DOIæŸ¥è©¢å…ƒæ•¸æ“šï¼ˆCrossRef APIï¼‰
- ä½¿ç”¨æ¨™é¡ŒæŸ¥è©¢å…ƒæ•¸æ“šï¼ˆSemantic Scholar APIï¼‰
- ç§»é™¤é‡è¤‡é—œéµè©
- ä¿®æ­£å¹´ä»½ç¯„åœéŒ¯èª¤

**é…ç½®æ–‡ä»¶**: `src/checkers/quality_rules.yaml`
- 290è¡ŒYAMLè¦å‰‡å®šç¾©
- å¯è‡ªè¨‚ç„¡æ•ˆæ¨¡å¼ã€å¯ç–‘æ¨¡å¼ã€è³ªé‡æŒ‡æ¨™
- æ”¯æ´æ­£å‰‡è¡¨é”å¼åŒ¹é…

**å¯¦éš›æ¸¬è©¦çµæœ**ï¼ˆ30ç¯‡è«–æ–‡çŸ¥è­˜åº«ï¼‰:
```
å¹³å‡è©•åˆ†: 68.2/100
ç¸½å•é¡Œæ•¸: 79
  - åš´é‡å•é¡Œ: 50 (year missing: 30, abstract missing: 16)
  - è­¦å‘Š: 20 (keywords insufficient: 20)

è³ªé‡åˆ†å¸ƒ:
  - è‰¯å¥½: 12ç¯‡ (40%)
  - å¯æ¥å—: 6ç¯‡ (20%)
  - è¼ƒå·®: 12ç¯‡ (40%)

å¸¸è¦‹å•é¡Œ:
  1. æ‰€æœ‰è«–æ–‡ç¼ºå°‘å¹´ä»½ (100%)
  2. é—œéµè©ä¸è¶³ (67%)
  3. æ‘˜è¦ç¼ºå¤± (53%)
  4. ç„¡æ•ˆæ¨™é¡Œæ ¼å¼ (7%)
```

**ä½¿ç”¨å»ºè­°**:
1. **å®šæœŸæª¢æŸ¥**: æ¯é€±æˆ–æ¯æœˆåŸ·è¡Œä¸€æ¬¡å®Œæ•´æª¢æŸ¥
2. **å…¥åº«å‰æª¢æŸ¥**: ä½¿ç”¨`analyze_paper.py`æ™‚å…ˆæª¢æŸ¥æå–è³ªé‡
3. **æ‰¹æ¬¡ä¿®å¾©**: å…ˆç”¨`--critical-only`æ‰¾å‡ºåš´é‡å•é¡Œï¼Œå†é€ä¸€ä¿®å¾©
4. **é‡è¤‡åµæ¸¬**: æ–°å¢å¤§é‡è«–æ–‡å¾ŒåŸ·è¡Œï¼Œé¿å…çŸ¥è­˜åº«è†¨è„¹

---

## å‘é‡æœç´¢ç³»çµ± (Vector Search) âœ…

**ç‹€æ…‹**: Phase 1.5 å®Œæˆå¯¦ä½œ
**å®Œæ•´æ–‡æª”**: [docs/modules/VECTOR_SEARCH.md](docs/modules/VECTOR_SEARCH.md)

åŸºæ–¼å‘é‡åµŒå…¥çš„èªç¾©æœç´¢ç³»çµ±ï¼Œæ”¯æ´è«–æ–‡å’Œ Zettelkasten å¡ç‰‡çš„æ™ºèƒ½æª¢ç´¢ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **èªç¾©æœç´¢**: ä½¿ç”¨è‡ªç„¶èªè¨€æŸ¥è©¢ç›¸é—œè«–æ–‡å’Œå¡ç‰‡
- **ç›¸ä¼¼å…§å®¹ç™¼ç¾**: æ ¹æ“š ID å°‹æ‰¾ç›¸é—œç ”ç©¶
- **æ··åˆæœç´¢**: çµåˆé—œéµè©åŒ¹é…ï¼ˆFTSï¼‰å’Œèªç¾©ç†è§£

### å…©ç¨® Embedder

| Provider | æ¨¡å‹ | ç¶­åº¦ | æˆæœ¬ | é€Ÿåº¦ |
|----------|------|------|------|------|
| **Gemini** | embedding-001 | 768 | $0.00015/1K tokens | å¿« |
| **Ollama** | qwen3-embedding:4b | 2560 | $0 (æœ¬åœ°) | ä¸­ |

### å¿«é€Ÿé–‹å§‹

```bash
# 1. ç”ŸæˆåµŒå…¥
python generate_embeddings.py

# 2. èªç¾©æœç´¢
python kb_manage.py semantic-search "èªçŸ¥ç§‘å­¸"

# 3. å°‹æ‰¾ç›¸ä¼¼å…§å®¹
python kb_manage.py similar <paper_id>

# 4. æ··åˆæœç´¢
python kb_manage.py hybrid-search "machine learning"
```

### æ€§èƒ½æŒ‡æ¨™

- ç”Ÿæˆæˆæœ¬: ~$0.0173 (83å€‹å‘é‡)
- æŸ¥è©¢æˆæœ¬: ~$0.00001/æ¬¡
- æŸ¥è©¢æ™‚é–“: 3-8ç§’
- åŒé ˜åŸŸç›¸ä¼¼åº¦: 60-80%

**è©³ç´°æ–‡æª”**: [docs/modules/VECTOR_SEARCH.md](docs/modules/VECTOR_SEARCH.md)
**ç¯„ä¾‹ä»£ç¢¼**: [examples/vector_search/](examples/vector_search/)

---

## Concept Mapper - æ¦‚å¿µç¶²çµ¡åˆ†æå™¨ (Phase 2.2) âœ… NEW

**Phase 2.2** å®Œæˆå¯¦ä½œï¼åŸºæ–¼åœ–è«–å’Œç¶²çµ¡åˆ†æçš„ Zettelkasten æ¦‚å¿µé—œä¿‚è¦–è¦ºåŒ–ç³»çµ±ï¼Œæ”¯æ´ Obsidian å‹å¥½æ ¼å¼è¼¸å‡ºã€‚

### ç³»çµ±æ¶æ§‹

```
src/analyzers/
â”œâ”€â”€ concept_mapper.py         # æ¦‚å¿µç¶²çµ¡åˆ†ææ ¸å¿ƒ (1,230è¡Œ)
â”œâ”€â”€ obsidian_exporter.py      # Obsidian æ ¼å¼å°å‡ºå™¨ (700è¡Œ)
â””â”€â”€ relation_finder.py        # é—œä¿‚è­˜åˆ¥å™¨ (Phase 2.1)

output/concept_analysis/
â”œâ”€â”€ concept_network.html      # D3.js äº’å‹•å¼ç¶²çµ¡åœ–
â”œâ”€â”€ concept_network.dot       # Graphviz DOT æ ¼å¼
â”œâ”€â”€ analysis_report.md        # å®Œæ•´åˆ†æå ±å‘Š
â”œâ”€â”€ analysis_data.json        # åŸå§‹æ•¸æ“š
â””â”€â”€ obsidian/                 # Obsidian å‹å¥½æ ¼å¼
    â”œâ”€â”€ README.md
    â”œâ”€â”€ suggested_links.md
    â”œâ”€â”€ key_concepts_moc.md
    â”œâ”€â”€ path_analysis.md
    â””â”€â”€ community_summaries/
```

### æ ¸å¿ƒåŠŸèƒ½

#### 1. æ¦‚å¿µç¶²çµ¡å»ºæ§‹

åŸºæ–¼ Phase 2.1 çš„é—œä¿‚è­˜åˆ¥çµæœï¼Œå»ºæ§‹å®Œæ•´çš„æ¦‚å¿µç¶²çµ¡ï¼š

```python
from src.analyzers.concept_mapper import ConceptMapper

mapper = ConceptMapper()

# åŸ·è¡Œå®Œæ•´åˆ†æ
results = mapper.analyze_all(
    output_dir="output/concept_analysis",
    visualize=True,           # ç”Ÿæˆ D3.js + Graphviz
    obsidian_mode=True,       # ç”Ÿæˆ Obsidian æ ¼å¼
    obsidian_options={
        'suggested_links_min_confidence': 0.4,
        'suggested_links_top_n': 50,
        'moc_top_n': 20,
        'max_communities': 10,
        'path_top_n': 10
    }
)
```

**ç¶²çµ¡çµ±è¨ˆ**:
- ç¯€é»æ•¸: 704
- é‚Šæ•¸: 56,423
- å¹³å‡åº¦: 160.29
- ç¶²çµ¡å¯†åº¦: 0.228

#### 2. ç¤¾ç¾¤æª¢æ¸¬ (Louvain ç®—æ³•)

è‡ªå‹•è­˜åˆ¥æ¦‚å¿µç¤¾ç¾¤ï¼Œå°‡ç›¸é—œæ¦‚å¿µåˆ†çµ„ï¼š

```python
communities = mapper.detect_communities()

# æ¯å€‹ç¤¾ç¾¤åŒ…å«:
# - community_id: ç¤¾ç¾¤ç·¨è™Ÿ
# - size: ç¯€é»æ•¸
# - density: ç¤¾ç¾¤å¯†åº¦
# - hub_node: ä¸­å¿ƒç¯€é»
# - top_concepts: æ ¸å¿ƒæ¦‚å¿µåˆ—è¡¨
```

**å¯¦éš›æ¸¬è©¦çµæœ**:
- æª¢æ¸¬åˆ° 1 å€‹å¤§å‹ç¤¾ç¾¤ï¼ˆé«˜åº¦ç›¸é—œçš„çŸ¥è­˜åº«ï¼‰
- ç¤¾ç¾¤å¯†åº¦: 0.228
- ä¸­å¿ƒç¯€é»: Liu-2012-003 (è¦–è¦ºå­—ç¬¦è™•ç†)

#### 3. ä¸­å¿ƒæ€§åˆ†æ (PageRank + Centrality)

è­˜åˆ¥ç¶²çµ¡ä¸­æœ€å…·å½±éŸ¿åŠ›çš„æ¦‚å¿µï¼š

```python
centralities = mapper.analyze_centrality()

# æ¯å€‹ç¯€é»åŒ…å«:
# - pagerank: PageRank åˆ†æ•¸ï¼ˆæ•´é«”å½±éŸ¿åŠ›ï¼‰
# - degree_centrality: åº¦ä¸­å¿ƒæ€§ï¼ˆé€£æ¥æ•¸ï¼‰
# - betweenness_centrality: ä»‹æ•¸ä¸­å¿ƒæ€§ï¼ˆæ©‹æ¥èƒ½åŠ›ï¼‰
# - closeness_centrality: æ¥è¿‘ä¸­å¿ƒæ€§ï¼ˆå¹³å‡è·é›¢ï¼‰
```

**Top 5 æ ¸å¿ƒæ¦‚å¿µ**:
1. Liu-2012-003 (PageRank: 0.0047, Degree: 0.836)
2. Liu-2012-002 (PageRank: 0.0047, Degree: 0.832)
3. Gao-2009a-001 (PageRank: 0.0046, Degree: 0.815)
4. Liu-2012-005 (PageRank: 0.0046, Degree: 0.815)
5. Gao-2009a-006 (PageRank: 0.0046, Degree: 0.812)

#### 4. è·¯å¾‘åˆ†æ (Concept Evolution)

è­˜åˆ¥æ¦‚å¿µä¹‹é–“çš„æ¨å°å’Œæ¼”åŒ–è·¯å¾‘ï¼š

```python
paths = mapper.find_influential_paths(min_length=2)

# æ¯æ¢è·¯å¾‘åŒ…å«:
# - start_node: èµ·å§‹æ¦‚å¿µ
# - end_node: çµæŸæ¦‚å¿µ
# - path: è·¯å¾‘ç¯€é»åˆ—è¡¨
# - length: è·¯å¾‘é•·åº¦
# - confidence: è·¯å¾‘ä¿¡åº¦
```

**æ³¨æ„**: è·¯å¾‘æ•¸é‡å–æ±ºæ–¼ç¶²çµ¡çµæ§‹ï¼Œå¯èƒ½ç‚º 0ï¼ˆé«˜åº¦é€£æ¥çš„ç¶²çµ¡ï¼‰

#### 5. Obsidian æ•´åˆ âœ¨

è‡ªå‹•ç”Ÿæˆ Obsidian å‹å¥½çš„ Markdown æ–‡ä»¶ï¼ŒåŒ…å«å®Œç¾çš„ Wiki Linksï¼š

**Wiki Links æ ¼å¼**:
```markdown
[[zettel_Abbas-2022_20251104/zettel_index#1. [ç›®æ¨™è¨­å®šç†è«–](zettel_cards/Abbas-2022-001.md)|ç›®æ¨™è¨­å®šç†è«–]]
```

**ç”Ÿæˆçš„æ–‡ä»¶**:

1. **suggested_links.md** - æ™ºèƒ½é€£çµå»ºè­°
   - åŸºæ–¼å‘é‡ç›¸ä¼¼åº¦ (Gemini embeddings)
   - ä¿¡åº¦è©•åˆ†å’Œé—œä¿‚é¡å‹
   - å¯ç›´æ¥è¤‡è£½åˆ° Obsidian ä½¿ç”¨

2. **key_concepts_moc.md** - æ ¸å¿ƒæ¦‚å¿µåœ°åœ–
   - Top 20 æ¦‚å¿µï¼ˆPageRank æ’åºï¼‰
   - Hub ç¯€é»ï¼ˆé«˜åº¦é€£æ¥ï¼‰
   - Bridge ç¯€é»ï¼ˆæ©‹æ¥æ¦‚å¿µï¼‰

3. **community_summaries/** - ç¤¾ç¾¤æ‘˜è¦
   - æ¯å€‹ç¤¾ç¾¤ä¸€å€‹æ–‡ä»¶
   - åŒ…å«æ‰€æœ‰æ¦‚å¿µçš„ Wiki Links
   - ä¸­å¿ƒç¯€é»å’Œæ ¸å¿ƒæ¦‚å¿µæ¨™è¨»

4. **path_analysis.md** - è·¯å¾‘åˆ†æ
   - æ¦‚å¿µæ¨å°è·¯å¾‘
   - æ¼”åŒ–é—œä¿‚å¯è¦–åŒ–

5. **README.md** - ç´¢å¼•å’Œçµ±è¨ˆ
   - å¿«é€Ÿå°èˆª
   - ç¶²çµ¡çµ±è¨ˆæ‘˜è¦
   - ä½¿ç”¨å»ºè­°

#### 6. è¦–è¦ºåŒ–

**D3.js äº’å‹•å¼ç¶²çµ¡åœ–** (`concept_network.html`):
- ç¸®æ”¾å’Œæ‹–æ›³
- é»æ“Šç¯€é»é¡¯ç¤ºè©³ç´°ä¿¡æ¯
- é¡è‰²ç·¨ç¢¼ï¼ˆæ ¹æ“šç¤¾ç¾¤ï¼‰
- é‚Šçš„ç²—ç´°ï¼ˆæ ¹æ“šé—œä¿‚å¼·åº¦ï¼‰

**Graphviz DOT æ ¼å¼** (`concept_network.dot`):
```bash
# è½‰æ›ç‚ºé«˜å“è³ªåœ–ç‰‡
dot -Tpng concept_network.dot -o network.png
dot -Tsvg concept_network.dot -o network.svg
```

### CLI ä½¿ç”¨

```bash
# åŸºæœ¬ä½¿ç”¨ï¼ˆå®Œæ•´åˆ†æ + Obsidian æ ¼å¼ï¼‰
python kb_manage.py visualize-network --obsidian

# è‡ªå®šç¾©åƒæ•¸
python kb_manage.py visualize-network --obsidian \
    --min-confidence 0.35 \
    --top-n 100 \
    --moc-top 30

# åªè¦ Obsidian æ ¼å¼ï¼Œè·³éè¦–è¦ºåŒ–
python kb_manage.py visualize-network --obsidian --no-viz

# è‡ªå®šç¾©è¼¸å‡ºç›®éŒ„
python kb_manage.py visualize-network --obsidian \
    --output my_analysis
```

**CLI åƒæ•¸**:
| åƒæ•¸ | èªªæ˜ | é»˜èªå€¼ |
|------|------|--------|
| `--output` | è¼¸å‡ºç›®éŒ„ | `output/concept_analysis` |
| `--obsidian` | ç”Ÿæˆ Obsidian æ ¼å¼ | False |
| `--no-viz` | è·³éè¦–è¦ºåŒ– | False |
| `--top-n` | å»ºè­°é€£çµæ•¸é‡ | 50 |
| `--min-confidence` | æœ€å°ä¿¡åº¦ | 0.4 |
| `--moc-top` | MOC é¡¯ç¤ºæ•¸é‡ | 20 |
| `--max-communities` | æœ€å¤šç¤¾ç¾¤æ•¸ | 10 |
| `--max-paths` | è·¯å¾‘æ•¸é‡ | 10 |

### åœ¨ Obsidian ä¸­ä½¿ç”¨

**æ­¥é©Ÿ 1: æ‰“é–‹è¼¸å‡ºç›®éŒ„**
```
File â†’ Open folder as vault â†’ output/concept_analysis/obsidian/
```

**æ­¥é©Ÿ 2: ç€è¦½åˆ†æçµæœ**
1. å¾ `README.md` é–‹å§‹äº†è§£æ•´é«”çµæ§‹
2. æŸ¥çœ‹ `key_concepts_moc.md` è­˜åˆ¥æ ¸å¿ƒæ¦‚å¿µ
3. æ¢ç´¢ `community_summaries/` äº†è§£æ¦‚å¿µåˆ†çµ„
4. æ‡‰ç”¨ `suggested_links.md` ä¸­çš„å»ºè­°åˆ°ä½ çš„ç­†è¨˜

**æ­¥é©Ÿ 3: ä½¿ç”¨ Graph View**
- å•Ÿç”¨ Obsidian çš„ Graph View æ’ä»¶
- æŸ¥çœ‹æ¦‚å¿µä¹‹é–“çš„é€£æ¥çµæ§‹
- èˆ‡ `concept_network.html` å°ç…§

### æŠ€è¡“ç´°ç¯€

**ä¾è³´åº«**:
- `networkx`: åœ–è«–å’Œç¶²çµ¡åˆ†æ
- `python-louvain`: ç¤¾ç¾¤æª¢æ¸¬
- `numpy`: æ•¸å€¼è¨ˆç®—
- ChromaDB + Gemini: å‘é‡ç›¸ä¼¼åº¦è¨ˆç®—ï¼ˆPhase 1.5ï¼‰

**æ¼”ç®—æ³•**:
- **ç¤¾ç¾¤æª¢æ¸¬**: Louvain (modularity optimization)
- **ä¸­å¿ƒæ€§**: PageRank, Degree, Betweenness, Closeness
- **è·¯å¾‘æœç´¢**: BFS/DFS with PageRank weighting
- **ç›¸ä¼¼åº¦**: Cosine similarity (768-dim Gemini embeddings)

**æ€§èƒ½æŒ‡æ¨™** (704 å¼µå¡ç‰‡):
| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| åˆ†ææ™‚é–“ | ~2-3 åˆ†é˜ |
| è¨˜æ†¶é«”ä½¿ç”¨ | ~500 MB |
| è¼¸å‡ºå¤§å° | ~5 MB (å«è¦–è¦ºåŒ–) |
| ç¶²çµ¡å¯†åº¦ | 0.228 (é«˜åº¦ç›¸é—œ) |

### é…ç½®é¸é …

**èª¿æ•´ä¿¡åº¦é–¾å€¼**:
- `0.3`: å¯¬é¬†ï¼ˆæ›´å¤šå»ºè­°ï¼Œå¯èƒ½æœ‰é›œè¨Šï¼‰
- `0.4`: å¹³è¡¡ï¼ˆé»˜èªï¼Œæ¨è–¦ï¼‰âœ…
- `0.5`: åš´æ ¼ï¼ˆé«˜å“è³ªï¼Œä½†æ•¸é‡å°‘ï¼‰

**ä¾çŸ¥è­˜åº«è¦æ¨¡èª¿æ•´**:
| è¦æ¨¡ | top-n | moc-top |
|------|-------|---------|
| <200 å¼µ | 30-50 | 15-20 |
| 200-500 å¼µ | 50-100 | 20-30 |
| 500-1000 å¼µ | 100-200 | 30-50 |
| >1000 å¼µ | 200+ | 50-100 |

### æ•…éšœæ’é™¤

**å•é¡Œ 1: suggested_links.md ç‚ºç©º**
- åŸå› : ä¿¡åº¦é–¾å€¼éé«˜
- è§£æ±º: é™ä½ `--min-confidence` è‡³ 0.3-0.35

**å•é¡Œ 2: Wiki Links ç„¡æ³•è·³è½‰**
- ç¢ºèª Obsidian å·²å•Ÿç”¨ Wiki Links
- æª¢æŸ¥è·¯å¾‘æ ¼å¼: `zettel_xxx/zettel_index#æ¢ç›®`

**å•é¡Œ 3: ç¤¾ç¾¤åˆ—è¡¨éé•· (>500)**
- é€™æ˜¯æ­£å¸¸ç¾è±¡ï¼ˆé«˜åº¦ç›¸é—œçš„çŸ¥è­˜åº«ï¼‰
- é—œæ³¨ Top æ¦‚å¿µå’Œä¸­å¿ƒç¯€é»å³å¯

### ä½¿ç”¨å ´æ™¯

**å ´æ™¯ 1: çŸ¥è­˜çµæ§‹æ¢ç´¢**
```bash
# 1. åŸ·è¡Œåˆ†æ
python kb_manage.py visualize-network --obsidian

# 2. åœ¨ Obsidian ä¸­æŸ¥çœ‹æ ¸å¿ƒæ¦‚å¿µ
# 3. ä½¿ç”¨ Graph View äº†è§£çŸ¥è­˜çµæ§‹
# 4. æ‡‰ç”¨å»ºè­°é€£çµæ“´å±•ç­†è¨˜ç¶²çµ¡
```

**å ´æ™¯ 2: æ–‡ç»ç›¸é—œæ€§ç ”ç©¶**
```bash
# 1. æ‰¾åˆ°æ„Ÿèˆˆè¶£çš„æ¦‚å¿µåœ¨ key_concepts_moc.md
# 2. æŸ¥çœ‹è©²æ¦‚å¿µæ‰€åœ¨çš„ç¤¾ç¾¤
# 3. æ¢ç´¢ç›¸é—œæ¦‚å¿µå’Œè·¯å¾‘
# 4. æ•´åˆåˆ°æ–‡ç»å›é¡§ä¸­
```

**å ´æ™¯ 3: å®šæœŸç¶­è­·**
```bash
# æ¯é€±åŸ·è¡Œä¸€æ¬¡ï¼Œæ›´æ–°æ¦‚å¿µç¶²çµ¡
python kb_manage.py visualize-network --obsidian

# æª¢æŸ¥æ–°å¢å¡ç‰‡çš„ä½ç½®
# æ‡‰ç”¨æ–°çš„é€£çµå»ºè­°
# æ›´æ–°æ ¸å¿ƒæ¦‚å¿µç­†è¨˜
```

### æ–‡æª”è³‡æº

- **å®Œæ•´ä½¿ç”¨æŒ‡å—**: `OBSIDIAN_INTEGRATION_GUIDE.md` (3000+ è¡Œ)
- **æ¸¬è©¦å ±å‘Š**: `OBSIDIAN_INTEGRATION_TEST_REPORT.md`
- **ä»£ç¢¼æ–‡æª”**: `src/analyzers/concept_mapper.py` é ‚éƒ¨æ³¨é‡‹
- **Skill æ–‡æª”**: `.claude/skills/concept-mapper.md`

---

## Zettelkasten å¡ç‰‡ç”Ÿæˆç³»çµ±æ”¹é€² (Phase 2.3) âœ… å·²å®Œæˆ

**ç‹€æ…‹**: âœ… å·²å®Œæˆ (2025-11-12) | **ç‰ˆæœ¬**: v0.7.0-alpha

### å®Œæˆæ‘˜è¦

æˆåŠŸä¿®å¾© Phase 2.3 æ¸¬è©¦ä¸­ç™¼ç¾çš„æ‰€æœ‰å•é¡Œï¼Œå®Œæˆä¸‰å€‹ LLMï¼ˆGemini 2.0 Flash, DeepSeek R1, Llama 3.3 70Bï¼‰çš„ Zettelkasten å¡ç‰‡ç”Ÿæˆå“è³ªé©—è­‰ï¼Œä¸¦ç¢ºç«‹ç‚ºç³»çµ±é è¨­ LLMã€‚

**å®Œæ•´å ±å‘Š**: [PHASE23_FIXES_COMPLETED_20251112.md](PHASE23_FIXES_COMPLETED_20251112.md)

### ä¿®å¾©å•é¡Œæ¸…å–®

#### 1. æ¨¡å‹è­˜åˆ¥åŠŸèƒ½ âœ…
- **å•é¡Œ**: ç„¡æ³•åˆ†è¾¨ä¸åŒ LLM ç”Ÿæˆçš„å¡ç‰‡
- **ä¿®å¾©**: åœ¨è¼¸å‡ºç›®éŒ„åç¨±ä¸­åŠ å…¥æ¨¡å‹æ¨™è­˜
- **çµæœ**:
  - Gemini: `zettel_Jones-2024_20251112_gemini_2.0_flash_exp/`
  - DeepSeek: `zettel_Jones-2024_20251112_deepseek_r1/`
  - Llama: `zettel_Jones-2024_20251112_llama_3.3_70b_instruct/`

#### 2. èª¿è©¦è¼¸å‡ºç³»çµ± âœ…
- **åŠŸèƒ½**: è‡ªå‹•ä¿å­˜ LLM åŸå§‹è¼¸å‡ºåˆ°èª¿è©¦æ–‡ä»¶
- **ç”¨é€”**: æ•…éšœæ’æŸ¥å’Œå“è³ªåˆ†æ
- **ä½ç½®**: `output/debug_llm_output_{cite_key}_{model_name}.txt`

#### 3. é€£çµç¶²çµ¡è§£æå™¨å¢å¼· âœ…
- **å•é¡Œ**: å‡ºç¾éŒ¯èª¤é€£çµ `[[- **** - []]]`
- **åŸå› **: LLM ç”Ÿæˆç©ºé€£çµæ™‚ï¼Œè§£æå™¨éŒ¯èª¤æå– Markdown æ ¼å¼ç¬¦è™Ÿ
- **ä¿®å¾©**: 6 å±¤éæ¿¾æ©Ÿåˆ¶
  - éæ¿¾ç©ºå­—ä¸²
  - éæ¿¾åªæœ‰æ¨™é»ç¬¦è™Ÿ
  - éæ¿¾ Markdown æ ¼å¼ç¬¦è™Ÿ (`- ****`, `***`, `--`)
  - éæ¿¾é–‹é ­ç‚º `-` çš„å­—ä¸²
  - éæ¿¾é•·åº¦ < 3 çš„å­—ä¸²
  - ä½¿ç”¨æ­£å‰‡è¡¨é”å¼: `^[\-\*\s]+$`
- **çµæœ**: æ‰€æœ‰ä¸‰å€‹ LLM éŒ¯èª¤é€£çµæ•¸ = 0

#### 4. max_tokens å„ªåŒ– âœ…
- **å•é¡Œ**: Llama ç”Ÿæˆ 11/20 å¼µå¡ç‰‡ï¼ˆè¼¸å‡ºè¢«æˆªæ–·ï¼‰
- **ä¿®å¾©**: ç‚º DeepSeek å’Œ Llama å¢åŠ  max_tokens è‡³ 16000
- **çµæœ**: æˆåŠŸç”Ÿæˆ 20/20 å¼µå¡ç‰‡

### ä¸‰å€‹é è¨­ LLM è¦æ ¼é©—è­‰

| æ¨¡å‹ | å¡ç‰‡æ•¸é‡ | éŒ¯èª¤é€£çµ | èªè¨€ | ä¾†æºè„ˆçµ¡ | max_tokens |
|------|---------|---------|------|---------|------------|
| **Gemini 2.0 Flash** | 20/20 âœ… | 0 âœ… | ä¸­æ–‡ âœ… | å®Œæ•´ âœ… | 4096 |
| **DeepSeek R1** | 20/20 âœ… | 0 âœ… | ä¸­æ–‡ âœ… | å®Œæ•´ âœ… | 16000 |
| **Llama 3.3 70B** | 20/20 âœ… | 0 âœ… | ä¸­æ–‡ âœ… | å®Œæ•´ âœ… | 16000 |

### ä½¿ç”¨å ´æ™¯å»ºè­°

| LLM | å„ªé» | é©ç”¨å ´æ™¯ | æˆæœ¬ |
|-----|------|---------|------|
| **Gemini 2.0 Flash** | é€Ÿåº¦å¿«ã€å“è³ªé«˜ | æ—¥å¸¸ä½¿ç”¨ã€æ‰¹æ¬¡è™•ç† | ä¸­ |
| **DeepSeek R1** | æ¨ç†èƒ½åŠ›å¼·ã€è¼¸å‡ºè©³ç´° | è¤‡é›œæ¨ç†ã€æ·±åº¦åˆ†æ | ä¸­ |
| **Llama 3.3 70B** | å¹³è¡¡æ€§èƒ½ã€ç©©å®š | æ¨™æº–ä»»å‹™ã€å‚™ç”¨é¸é … | ä¸­ |

### ä¿®æ”¹çš„æ–‡ä»¶

1. **regenerate_zettel_with_openrouter.py**
   - æ¨¡å‹åç¨±è¦ç¯„åŒ–
   - èª¿è©¦è¼¸å‡ºä¿å­˜
   - max_tokens ç­–ç•¥å„ªåŒ–

2. **src/generators/zettel_maker.py**
   - é€£çµæå–éæ¿¾å¢å¼·
   - æ­£å‰‡è¡¨é”å¼åŒ¹é…

3. **templates/prompts/zettelkasten_template.jinja2** (ä¹‹å‰ä¿®å¾©)
   - DeepSeek ä»»å‹™æ˜ç¢ºæ€§
   - ä¾†æºè„ˆçµ¡ç”Ÿæˆè¦æ±‚

---

## RelationFinder æ”¹é€²æ–¹æ¡ˆ (Phase 2.4) ğŸ”„ è¨­è¨ˆå®Œæˆ

**ç‹€æ…‹**: ğŸ“ è¨­è¨ˆéšæ®µ | **å„ªå…ˆç´š**: â­â­â­â­â­ æ¥µé«˜ | **é è¨ˆæ™‚é–“**: 6-9å¤©

### èƒŒæ™¯èˆ‡å‹•æ©Ÿ

**åŸºæº–æ¸¬è©¦ç™¼ç¾** (2025-11-05):
- æ¸¬è©¦è¦æ¨¡: 704 å¼µ Zettelkasten å¡ç‰‡
- è­˜åˆ¥é—œä¿‚ç¸½æ•¸: 56,436
- **é—œéµå•é¡Œ**: é«˜ä¿¡åº¦é—œä¿‚æ•¸ï¼ˆâ‰¥ 0.4ï¼‰= **0** âŒ
- **çµæœ**: Obsidian å»ºè­°é€£çµåŠŸèƒ½**å®Œå…¨ç„¡æ³•ä½¿ç”¨**

**å•é¡Œè¨ºæ–·**:
1. âŒ å¹³å‡ä¿¡åº¦è©•åˆ† ~0.33ï¼ˆä½æ–¼é–¾å€¼ 0.4ï¼‰
2. âŒ æ˜ç¢ºé€£çµè¦†è“‹ç‡åƒ… 11.6%ï¼ˆ82/704 å¼µå¡ç‰‡ï¼‰
3. âŒ ç¶²çµ¡å¯†åº¦éé«˜ï¼ˆ0.228ï¼‰ï¼Œç„¡æ³•å€åˆ†çœŸå¯¦é—œä¿‚
4. âŒ å…±åŒæ¦‚å¿µæå–ä¸è¶³ï¼ˆæœªä½¿ç”¨ description æ¬„ä½ï¼‰

**è©³ç´°å ±å‘Š**: `docs/BASELINE_RELATION_ANALYSIS.md`

### æ”¹é€²æ–¹æ¡ˆæ¦‚è¦½

**å®Œæ•´è¨­è¨ˆ**: `docs/RELATION_FINDER_IMPROVEMENTS.md` (1200+ è¡Œ)

#### æ”¹é€² 1: å¤šå±¤æ¬¡æ˜ç¢ºé€£çµæª¢æ¸¬ â­â­â­

**ç•¶å‰é™åˆ¶**: åªæª¢æŸ¥ `[[zettel_id]]` Wiki Links

**æ”¹é€²å…§å®¹**:
- **4å±¤é€£çµæª¢æ¸¬**:
  1. AIç­†è¨˜ä¸­çš„Wiki Linksï¼ˆèªå¢ƒåˆ†æï¼‰â†’ 0.5-1.0
  2. é€£çµç¶²çµ¡å€å¡Šï¼ˆ`## é€£çµç¶²çµ¡`ï¼‰â†’ 0.6-0.8
  3. ä¾†æºè„ˆçµ¡æåŠï¼ˆ`## ä¾†æºè„ˆçµ¡`ï¼‰â†’ 0.4
  4. å…§å®¹è‡ªç„¶æåŠï¼ˆæ¨™é¡Œå‡ºç¾ï¼‰â†’ 0.3
- **èªå¢ƒåˆ†æ**: è­˜åˆ¥ã€ŒåŸºæ–¼ã€ã€ã€Œå°å‘ã€ã€ã€Œå°æ¯”ã€ç­‰é—œä¿‚è©
- **é€£çµå¼·åº¦è©•åˆ†**: å¾äºŒå…ƒï¼ˆ0/0.3ï¼‰â†’ é€£çºŒï¼ˆ0.0-0.3ï¼‰

**é æœŸæ•ˆæœ**:
- æ˜ç¢ºé€£çµè²¢ç»: 0.035 â†’ **0.15+**ï¼ˆ+329%ï¼‰

#### æ”¹é€² 2: æ“´å±•å…±åŒæ¦‚å¿µæå– â­â­â­

**ç•¶å‰é™åˆ¶**: åªå¾ tagsã€core_conceptã€title æå–

**æ”¹é€²å…§å®¹**:
- **5å€‹ä¾†æºï¼ˆåŠ æ¬Šï¼‰**:
  - tags (1.0) - æœ€æº–ç¢º
  - core_concept (0.9) - æ¬¡æº–ç¢º
  - **description (0.8)** - æ–°å¢ï¼é¦–æ®µèªªæ˜
  - title (0.7) - è¼ƒç°¡çŸ­
  - ai_notes (0.6) - è¼ƒç™¼æ•£
- **ä¸­æ–‡åˆ†è©æ”¹é€²**: æ”¯æ´ jieba æˆ–é å®šç¾©è©åº«
- **åŠ æ¬Šè©•åˆ†æ©Ÿåˆ¶**: ä¸åŒä¾†æºæ¬Šé‡ä¸åŒ

**é æœŸæ•ˆæœ**:
- å…±åŒæ¦‚å¿µæ•¸é‡ +50%
- å…±åŒæ¦‚å¿µè²¢ç»: 0.08 â†’ **0.12+**ï¼ˆ+50%ï¼‰

#### æ”¹é€² 3: é ˜åŸŸç›¸é—œæ€§çŸ©é™£ â­â­

**ç•¶å‰é™åˆ¶**: äºŒå…ƒåˆ¤æ–·ï¼ˆåŒé ˜åŸŸ=0.1ï¼Œä¸åŒ=0.05ï¼‰

**æ”¹é€²å…§å®¹**:
```yaml
é ˜åŸŸç›¸é—œæ€§çŸ©é™£:
  CogSci â†” AI: 0.8 (é«˜åº¦ç›¸é—œ)
  CogSci â†” Linguistics: 0.8
  AI â†” Linguistics: 0.6 (ä¸­åº¦ç›¸é—œ)
  å…¶ä»–çµ„åˆ: 0.3 (å¼±ç›¸é—œ)
```
- **å¤šé ˜åŸŸæ”¯æ´**: è§£æ "CogSci, AI" æ ¼å¼
- **ç´°ç·»è©•åˆ†**: 0.03-0.10ï¼ˆè€Œé 0.05/0.10ï¼‰

**é æœŸæ•ˆæœ**:
- é ˜åŸŸè²¢ç»: 0.075 â†’ **0.09+**ï¼ˆ+20%ï¼‰

#### æ”¹é€² 4: AI Notes é€£çµç”Ÿæˆ â­â­

**å•é¡Œ**: LLM è¼¸å‡ºçš„ AI note ç¼ºå°‘å¡ç‰‡é–“é€£çµ

**è§£æ±ºæ–¹æ¡ˆ**:
- æ›´æ–° `templates/prompts/zettelkasten_template.jinja2`
- æ˜ç¢ºè¦æ±‚ã€Œå¿…é ˆå»ºç«‹ 2-3 å€‹å¡ç‰‡é€£çµã€
- Few-shot ç¯„ä¾‹å±•ç¤ºæ­£ç¢ºæ ¼å¼

**é æœŸæ•ˆæœ**:
- æ˜ç¢ºé€£çµè¦†è“‹ç‡: 11.6% â†’ **50%+**

#### æ”¹é€² 5: æ°¸ä¹…ç­†è¨˜ç”Ÿæˆå™¨ â­ (é•·æœŸ)

**åŠŸèƒ½**: å¾ AI notes + Human notes åˆæˆæ°¸ä¹…ç­†è¨˜

```bash
python kb_manage.py synthesize-permanent-note \
    --topic "è¦–è¦ºæ³¨æ„èˆ‡å·¥ä½œè¨˜æ†¶" \
    --zettel-ids CogSci-001 CogSci-003 CogSci-007
```

### æ•ˆæœé ä¼°

#### è·¨é ˜åŸŸå¡ç‰‡ä¿¡åº¦æå‡ï¼ˆç¯„ä¾‹ï¼‰

| ç¶­åº¦ | ç•¶å‰ | æ”¹é€²å¾Œ | æå‡ |
|------|-----|-------|------|
| èªç¾©ç›¸ä¼¼åº¦ (40%) | 0.26 | 0.26 | - |
| æ˜ç¢ºé€£çµ (30%) | 0.00 | **0.12** | +40% |
| å…±åŒæ¦‚å¿µ (20%) | 0.04 | **0.10** | +150% |
| é ˜åŸŸä¸€è‡´æ€§ (10%) | 0.05 | **0.08** | +60% |
| **ç¸½ä¿¡åº¦** | **0.35** | **0.56** | **+60%** |

#### æ•´é«”ç³»çµ±æ”¹å–„ç›®æ¨™

| æŒ‡æ¨™ | ç•¶å‰ | ç›®æ¨™ï¼ˆPhase 1ï¼‰ | æ”¹é€²å¹…åº¦ |
|------|-----|----------------|----------|
| é«˜ä¿¡åº¦é—œä¿‚æ•¸ï¼ˆâ‰¥ 0.4ï¼‰ | 0 | 5,000+ | +âˆ |
| å¹³å‡ä¿¡åº¦è©•åˆ† | 0.33 | 0.50+ | +51.5% |
| å»ºè­°é€£çµå¯ç”¨æ€§ | 0% | å¯ç”¨ | âœ… |
| æ˜ç¢ºé€£çµè¦†è“‹ç‡ | 11.6% | 50%+ | +331% |

### å¯¦æ–½è¨ˆç•«

#### Phase 1: æ ¸å¿ƒæ”¹é€²ï¼ˆP0å„ªå…ˆç´šï¼Œ1-2å¤©ï¼‰

**æ”¹é€² 2 + 3**: æ“´å±•å…±åŒæ¦‚å¿µ + é ˜åŸŸçŸ©é™£

- [ ] å¯¦ä½œ `_extract_shared_concepts_enhanced()`
- [ ] åŠ å…¥ description æ¬„ä½æå–
- [ ] å¯¦ä½œä¸­æ–‡åˆ†è©ï¼ˆé å®šç¾©è©åº«ï¼‰
- [ ] å®šç¾©é ˜åŸŸç›¸é—œæ€§çŸ©é™£
- [ ] æ”¯æ´å¤šé ˜åŸŸè§£æ
- [ ] æ›´æ–°ä¿¡åº¦è¨ˆç®—é‚è¼¯
- [ ] æ’°å¯«å–®å…ƒæ¸¬è©¦

**é©—æ”¶æ¨™æº–**:
- [ ] å…±åŒæ¦‚å¿µæ•¸é‡å¹³å‡å¢åŠ  50%+
- [ ] è·¨é ˜åŸŸå¡ç‰‡ä¿¡åº¦æå‡ 20%+
- [ ] ä¸ç ´å£ç¾æœ‰åŠŸèƒ½
- [ ] å–®å…ƒæ¸¬è©¦é€šéç‡ 100%

#### Phase 2: é€£çµå¢å¼·ï¼ˆP1å„ªå…ˆç´šï¼Œ2-3å¤©ï¼‰

**æ”¹é€² 1 + 4**: å¤šå±¤æ¬¡é€£çµæª¢æ¸¬ + Prompt æ”¹é€²

- [ ] å¯¦ä½œ `_check_explicit_link_enhanced()`
- [ ] å¯¦ä½œ Markdown å€å¡Šè§£æ
- [ ] å¯¦ä½œé€£çµèªå¢ƒåˆ†æ
- [ ] æ›´æ–° Zettelkasten Prompt
- [ ] æ–°å¢é€£çµç”ŸæˆæŒ‡å¼•
- [ ] Few-shot ç¯„ä¾‹å„ªåŒ–
- [ ] æ¸¬è©¦æ–°ç”Ÿæˆçš„å¡ç‰‡

**é©—æ”¶æ¨™æº–**:
- [ ] AI notes å¹³å‡åŒ…å« 2-3 å€‹é€£çµ
- [ ] é€£çµèªå¢ƒè­˜åˆ¥æº–ç¢ºç‡ > 80%
- [ ] æ˜ç¢ºé€£çµè¦†è“‹ç‡ > 30%
- [ ] æ•´åˆæ¸¬è©¦é€šé

#### Phase 3: æ°¸ä¹…ç­†è¨˜ï¼ˆP2å„ªå…ˆç´šï¼Œ3-4å¤©ï¼‰

**æ”¹é€² 5**: æ°¸ä¹…ç­†è¨˜ç”Ÿæˆå™¨

- [ ] å¯¦ä½œ `PermanentNoteGenerator` é¡
- [ ] å¯¦ä½œåˆæˆ Prompt å»ºæ§‹
- [ ] CLI å‘½ä»¤æ•´åˆ
- [ ] è¼¸å‡ºæ ¼å¼å„ªåŒ–
- [ ] ä½¿ç”¨æ–‡æª”æ’°å¯«

**é©—æ”¶æ¨™æº–**:
- [ ] èƒ½å¾ 3-5 å¼µå¡ç‰‡åˆæˆæ°¸ä¹…ç­†è¨˜
- [ ] ä¿ç•™ä¾†æºå¼•ç”¨
- [ ] å…§å®¹é€£è²«ä¸”æ·±å…¥
- [ ] ç«¯åˆ°ç«¯æ¸¬è©¦é€šé

### é…ç½®æ›´æ–°

**æ–°å¢é…ç½®** (`config/settings.yaml`):

```yaml
# RelationFinder é…ç½®
relation_finder:
  # ä¿¡åº¦è©•åˆ†æ¬Šé‡
  confidence_weights:
    semantic_similarity: 0.40
    link_explicit: 0.30
    co_occurrence: 0.20
    domain_consistency: 0.10

  # å…±åŒæ¦‚å¿µä¾†æºæ¬Šé‡
  concept_source_weights:
    tags: 1.0
    core_concept: 0.9
    description: 0.8
    title: 0.7
    ai_notes: 0.6

  # é ˜åŸŸç›¸é—œæ€§çŸ©é™£
  domain_similarity:
    - [CogSci, AI, 0.8]
    - [CogSci, Linguistics, 0.8]
    - [AI, Linguistics, 0.6]
    default: 0.3

  # é€£çµæª¢æ¸¬é…ç½®
  link_detection:
    enable_multi_layer: true
    context_window: 50
    link_strength_threshold: 0.3

  # ä¸­æ–‡åˆ†è©
  chinese_segmentation:
    method: "predefined"  # or "jieba"
    min_keyword_length: 2
    top_keywords: 10
```

### æ¸¬è©¦ç­–ç•¥

**å›æ­¸æ¸¬è©¦æµç¨‹**:

1. **ä¿å­˜åŸºæº–æ•¸æ“š** âœ…
   - `output/concept_analysis/`ï¼ˆåŸºæº–ç‰ˆæœ¬ï¼‰
   - `docs/BASELINE_RELATION_ANALYSIS.md`ï¼ˆå ±å‘Šï¼‰

2. **æ”¹é€²å¾Œé‡æ–°æ¸¬è©¦**
   ```bash
   python kb_manage.py visualize-network --obsidian \
       --output output/concept_analysis_v2
   ```

3. **æ¯”è¼ƒé—œéµæŒ‡æ¨™**
   - é«˜ä¿¡åº¦é—œä¿‚æ•¸ï¼š0 â†’ 5,000+
   - å¹³å‡ä¿¡åº¦ï¼š0.33 â†’ 0.50+
   - å»ºè­°é€£çµæ•¸é‡ï¼š0 â†’ 50+
   - ç¶²çµ¡çµæ§‹æ”¹å–„

4. **äººå·¥é©—è­‰**
   - éš¨æ©ŸæŠ½å– 20 æ¢é«˜ä¿¡åº¦é—œä¿‚
   - äººå·¥è©•ä¼°æº–ç¢ºç‡
   - ç›®æ¨™æº–ç¢ºç‡ï¼š> 80%

### å‘å¾Œç›¸å®¹æ€§

- âœ… **å®Œå…¨ç›¸å®¹**: API ä¸è®Šï¼Œå…§éƒ¨é‚è¼¯æ”¹é€²
- âœ… **é…ç½®å¯é¸**: æ–°å¢é…ç½®æœ‰é»˜èªå€¼
- âœ… **å¹³æ»‘å‡ç´š**: å¯é€æ­¥å•Ÿç”¨æ–°åŠŸèƒ½

### æ•ˆèƒ½å½±éŸ¿

| æ“ä½œ | ç•¶å‰ | æ”¹é€²å¾Œ | è®ŠåŒ– |
|------|-----|-------|------|
| å–®å¡ç‰‡é—œä¿‚è¨ˆç®— | ~0.5ç§’ | ~0.7ç§’ | +40% |
| å®Œæ•´ç¶²çµ¡ï¼ˆ704å¼µï¼‰ | 2-3åˆ†é˜ | 3-4åˆ†é˜ | +33% |

**è©•ä¼°**: æ•ˆæœæå‡é å¤§æ–¼æ€§èƒ½æå¤±ï¼Œå¯æ¥å—ã€‚

### åƒè€ƒæ–‡æª”

- **æ”¹é€²æ–¹æ¡ˆè©³ç´°è¨­è¨ˆ**: `docs/RELATION_FINDER_IMPROVEMENTS.md`ï¼ˆ1200è¡Œï¼‰
- **åŸºæº–æ¸¬è©¦å ±å‘Š**: `docs/BASELINE_RELATION_ANALYSIS.md`
- **æŠ€è¡“ç´°ç¯€**: `docs/RELATION_FINDER_TECHNICAL_DETAILS.md`
- **å¯¦æ–½æª¢æŸ¥æ¸…å–®**: è¦‹ RELATION_FINDER_IMPROVEMENTS.md æœ«å°¾

---

## å­¸è¡“é¢¨æ ¼ç³»çµ±

åŸºæ–¼Journal Clubé€†å‘å·¥ç¨‹ï¼Œæ”¯æ´8ç¨®å­¸è¡“é¢¨æ ¼ï¼š

1. **ç¶“å…¸å­¸è¡“** (classic_academic): å‚³çµ±å­¸è¡“èªè¨€ï¼Œå¼·èª¿ç†è«–å’Œæ–¹æ³•
2. **ç¾ä»£å­¸è¡“** (modern_academic): çµåˆè¦–è¦ºåŒ–å’Œæ•¸æ“šï¼Œæ¸…æ™°æ˜“æ‡‚
3. **è‡¨åºŠå°å‘** (clinical): å¼·èª¿è‡¨åºŠæ‡‰ç”¨å’Œç—…ä¾‹åˆ†æ
4. **ç ”ç©¶æ–¹æ³•** (research_methods): è‘—é‡ç ”ç©¶è¨­è¨ˆå’Œçµ±è¨ˆåˆ†æ
5. **æ–‡ç»å›é¡§** (literature_review): ç³»çµ±æ€§æ–‡ç»æ•´ç†å’Œæ¯”è¼ƒ
6. **æ¡ˆä¾‹åˆ†æ** (case_analysis): ä»¥å…·é«”æ¡ˆä¾‹ç‚ºä¸»çš„æ·±å…¥åˆ†æ
7. **æ•™å­¸å°å‘** (teaching): å¾ªåºæ¼¸é€²æ˜“æ‡‚ï¼Œé©åˆå­¸ç¿’è€…
8. **Zettelkastenå¡ç‰‡ç›’** (zettelkasten): åŸå­åŒ–ç­†è¨˜ï¼Œæ¯å¼µæŠ•å½±ç‰‡ç‚ºç¨ç«‹çŸ¥è­˜å–®å…ƒ âœ¨ NEW

### 5ç¨®è©³ç´°ç¨‹åº¦

- **æ¥µç°¡** (minimal): 2-3é»/å¼µï¼Œ1å¥è©±/é»
- **ç°¡è¦** (brief): 3-4é»/å¼µï¼Œ1-2å¥è©±/é»
- **æ¨™æº–** (standard): 4-5é»/å¼µï¼Œ2-3å¥è©±/é» â­ é»˜èª
- **è©³ç´°** (detailed): 5-6é»/å¼µï¼Œ3-4å¥è©±/é»
- **å®Œæ•´** (comprehensive): 6-8é»/å¼µï¼Œ4-5å¥è©±/é»

### 3ç¨®èªè¨€æ¨¡å¼

- **ä¸­æ–‡** (chinese): ç¹é«”ä¸­æ–‡
- **è‹±æ–‡** (english): English
- **ä¸­è‹±é›™èª** (bilingual): ä¸­æ–‡ç‚ºä¸»ï¼Œé—œéµè¡“èªé™„è‹±æ–‡

**è©³ç´°èªªæ˜**: [templates/styles/README.md](templates/styles/README.md)
**é…ç½®**: `templates/styles/academic_styles.yaml`

## Slash Commands

### /analyze-paper

åˆ†æè«–æ–‡ä¸¦æå–é—œéµä¿¡æ¯

```bash
/analyze-paper <pdf_path> [--add-to-kb] [--style <style>] [--format <format>]
```

**åƒæ•¸**:
- `pdf_path`: PDFæ–‡ä»¶è·¯å¾‘ï¼ˆå¿…éœ€ï¼‰
- `--add-to-kb`: åŠ å…¥çŸ¥è­˜åº«
- `--style`: å­¸è¡“é¢¨æ ¼ï¼ˆé»˜èªï¼šmodern_academicï¼‰
- `--format`: è¼¸å‡ºæ ¼å¼ï¼ˆmarkdown/json/pptx/allï¼‰

**ç¤ºä¾‹**:
```bash
/analyze-paper paper.pdf --add-to-kb --format all
```

**å®Œæ•´èªªæ˜**: `.claude/commands/analyze-paper.md`

## Slide Maker æŠ•å½±ç‰‡ç”Ÿæˆå™¨

### æ ¸å¿ƒåŠŸèƒ½

åŸºæ–¼Journal Clubæ¶æ§‹çš„å¤šé¢¨æ ¼å­¸è¡“æŠ•å½±ç‰‡ç”Ÿæˆç³»çµ±ï¼Œæ”¯æ´å¤šç¨®LLMå¾Œç«¯å’Œä¸‰ç¨®å·¥ä½œæµæ¨¡å¼ã€‚

**ä¸»è¦æ–‡ä»¶**: `src/generators/slide_maker.py`, `make_slides.py`

### ä½¿ç”¨æ–¹å¼

**å®Œæ•´ç¯„ä¾‹**: [examples/slide_maker/slide_maker_usage.sh](examples/slide_maker/slide_maker_usage.sh)

### åƒæ•¸èªªæ˜

| åƒæ•¸ | èªªæ˜ | å¯é¸å€¼ | é»˜èªå€¼ |
|------|------|--------|--------|
| `topic` | ç°¡å ±ä¸»é¡Œ | ä»»æ„æ–‡å­— | å¿…éœ€ |
| `--pdf` | PDFæ–‡ä»¶è·¯å¾‘ | æ–‡ä»¶è·¯å¾‘ | - |
| `--analyze-first` | å…ˆåˆ†æPDFä¸¦åŠ å…¥çŸ¥è­˜åº« | æ¨™è¨˜ | False |
| `--from-kb` | å¾çŸ¥è­˜åº«è«–æ–‡IDç”Ÿæˆ | æ•´æ•¸ | - |
| `--style` | å­¸è¡“é¢¨æ ¼ | 8ç¨®é¢¨æ ¼ | modern_academic |
| `--detail` | è©³ç´°ç¨‹åº¦ | 5ç¨®ç¨‹åº¦ | standard |
| `--language` | èªè¨€æ¨¡å¼ | chinese/english/bilingual | chinese |
| `--slides` | æŠ•å½±ç‰‡æ•¸é‡ | æ•´æ•¸ | 15 |
| `--llm-provider` | LLMæä¾›è€… | auto/ollama/google/openai/anthropic | auto |
| `--model` | æ¨¡å‹åç¨± | ä¾æä¾›è€… | gemma2:latest |
| `--output` | è¼¸å‡ºè·¯å¾‘ | æ–‡ä»¶è·¯å¾‘ | è‡ªå‹•ç”Ÿæˆ |

### å¤šLLMæ”¯æŒ

ç³»çµ±æ”¯æ´4ç¨®LLMå¾Œç«¯ï¼Œä¸¦å…·å‚™è‡ªå‹•åµæ¸¬å’Œæ•…éšœè½‰ç§»ï¼š

1. **Ollama** (æœ¬åœ°)
   - æ¨¡å‹ï¼šgemma2:latest, llama3, mistralç­‰
   - URLï¼šhttp://localhost:11434
   - å„ªé»ï¼šå®Œå…¨é›¢ç·šã€æ•¸æ“šéš±ç§

2. **Google Gemini**
   - æ¨¡å‹ï¼šgemini-2.0-flash-exp, gemini-pro
   - éœ€è¦ï¼šGOOGLE_API_KEYç’°å¢ƒè®Šæ•¸
   - å„ªé»ï¼šé€Ÿåº¦å¿«ã€å“è³ªé«˜ã€æœ‰å…è²»é¡åº¦

3. **OpenAI**
   - æ¨¡å‹ï¼šgpt-4, gpt-3.5-turbo
   - éœ€è¦ï¼šOPENAI_API_KEYç’°å¢ƒè®Šæ•¸
   - å„ªé»ï¼šå“è³ªæœ€é«˜ã€åŠŸèƒ½å®Œæ•´

4. **Anthropic Claude**
   - æ¨¡å‹ï¼šclaude-3-haikuï¼ˆæˆæœ¬æœ€ä½ï¼‰, claude-3-opus, claude-3-sonnet
   - éœ€è¦ï¼šANTHROPIC_API_KEYç’°å¢ƒè®Šæ•¸
   - å„ªé»ï¼šæ¨ç†èƒ½åŠ›å¼·ã€é•·æ–‡è™•ç†ä½³ã€haikuç‰ˆæœ¬é€Ÿåº¦å¿«ä¸”ä¾¿å®œ

**è‡ªå‹•é¸æ“‡é‚è¼¯**ï¼š
1. Google Gemini (å¦‚æœAPI keyå¯ç”¨)
2. OpenAI (å¦‚æœAPI keyå¯ç”¨)
3. Anthropic Claude (å¦‚æœAPI keyå¯ç”¨)
4. Ollama (å¦‚æœæœå‹™é‹è¡Œä¸­)
5. å¤±æ•—ä¸¦æç¤ºç”¨æˆ¶

### ä¸‰ç¨®å·¥ä½œæµæ¨¡å¼

**å®Œæ•´ç¯„ä¾‹**: [examples/slide_maker/slide_maker_usage.sh](examples/slide_maker/slide_maker_usage.sh)

**1. å¿«é€Ÿæ¨¡å¼**ï¼ˆç›´æ¥å¾PDFï¼‰
- ç›´æ¥æå–PDFæ–‡å­—ç”ŸæˆæŠ•å½±ç‰‡
- é€Ÿåº¦æœ€å¿«
- é©åˆå¿«é€Ÿé è¦½

**2. çŸ¥è­˜é©…å‹•æ¨¡å¼**ï¼ˆæ¨è–¦ï¼‰
- å…ˆç”¨ `analyze_paper.py` åˆ†æPDF
- æå–çµæ§‹åŒ–ä¿¡æ¯ï¼ˆæ¨™é¡Œã€ä½œè€…ã€ç« ç¯€ï¼‰
- ä¿å­˜åˆ°çŸ¥è­˜åº«
- å¾çµæ§‹åŒ–å…§å®¹ç”ŸæˆæŠ•å½±ç‰‡
- **å“è³ªæœ€é«˜ã€å…§å®¹æœ€æº–ç¢º**

**3. é‡ç”¨æ¨¡å¼**ï¼ˆå¾çŸ¥è­˜åº«ï¼‰
- å¾å·²æœ‰çŸ¥è­˜åº«è«–æ–‡ç”Ÿæˆ
- ç„¡éœ€é‡æ–°åˆ†æ
- å¯ç”¨ä¸åŒé¢¨æ ¼é‡è¤‡ç”Ÿæˆ

### æ ¼å¼æ”¹é€²åŠŸèƒ½

ç³»çµ±åŒ…å«æ™ºèƒ½æ’ç‰ˆåŠŸèƒ½ï¼Œè‡ªå‹•é˜²æ­¢å…§å®¹æº¢å‡ºï¼š

**æ™ºèƒ½å­—é«”èª¿æ•´**ï¼š
- å…§å®¹ >1000å­— æˆ– >8é …ï¼š11ptå­—é«” + 0.9è¡Œè·
- å…§å®¹ 800-1000å­— æˆ– 6-8é …ï¼š12ptå­—é«” + 1.0è¡Œè·
- å…§å®¹ 600-800å­— æˆ– 5-6é …ï¼š14ptå­—é«” + 1.1è¡Œè·
- å…§å®¹ 400-600å­—ï¼š16ptå­—é«” + 1.2è¡Œè·
- å…§å®¹ <400å­—ï¼š18ptå­—é«” + 1.3è¡Œè·

**æ¨™é¡Œæå–**ï¼šè‡ªå‹•å¾LLMè¼¸å‡ºæå–çœŸå¯¦æ¨™é¡Œè€Œéã€ŒæŠ•å½±ç‰‡1ã€

### è¼¸å‡ºæ ¼å¼

ç”Ÿæˆçš„PPTXæ–‡ä»¶åŒ…å«ï¼š
- æ¨™é¡Œé ï¼šä¸»æ¨™é¡Œå’Œå‰¯æ¨™é¡Œ
- å…§å®¹é ï¼šè‡ªå‹•æ ¼å¼åŒ–çš„é …ç›®ç¬¦è™Ÿåˆ—è¡¨
- 16:9å¯¬è¢å¹•æ ¼å¼
- è‡ªå‹•æ–‡å­—æ›è¡Œå’Œç¸®æ”¾

### APIå¯†é‘°é…ç½®

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å‰µå»º `.env` æ–‡ä»¶ï¼š
```bash
# Google Gemini
GOOGLE_API_KEY=your-google-api-key-here

# OpenAI
OPENAI_API_KEY=your-openai-api-key-here

# Anthropic Claude
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Ollamaï¼ˆæœ¬åœ°ï¼Œç„¡éœ€API keyï¼‰
OLLAMA_URL=http://localhost:11434
```

### æ•…éšœæ’é™¤

**å•é¡Œ1ï¼šOllama timeout**
```bash
# ä½¿ç”¨é›²ç«¯LLMä»£æ›¿
python make_slides.py "ä¸»é¡Œ" --llm-provider google --model gemini-2.0-flash-exp
```

**å•é¡Œ2ï¼šå…§å®¹ä¸ç¬¦åˆPDF**
- ç¢ºä¿ä½¿ç”¨ `--analyze-first` æˆ– `--from-kb`
- æª¢æŸ¥çŸ¥è­˜åº«Markdownæ–‡ä»¶æ˜¯å¦åŒ…å«å®Œæ•´å…§å®¹

**å•é¡Œ3ï¼šLLMé€£æ¥å¤±æ•—**
```bash
# æª¢æŸ¥API key
echo $GOOGLE_API_KEY

# æ¸¬è©¦Ollama
curl http://localhost:11434/api/tags
```

## Skillsåƒè€ƒ

### pdf-extractor

PDFæ–‡æœ¬å’Œçµæ§‹æå–

**èªªæ˜**: `.claude/skills/pdf-extractor.md`

### slide-maker âœ…

åŸºæ–¼Journal Clubçš„å¤šé¢¨æ ¼å­¸è¡“æŠ•å½±ç‰‡ç”Ÿæˆ

**èªªæ˜**: `.claude/skills/slide-maker.md`
**å¯¦ä½œ**: `src/generators/slide_maker.py`, `make_slides.py`

**ç‰¹æ€§**:
- 8ç¨®å­¸è¡“é¢¨æ ¼ Ã— 5ç¨®è©³ç´°ç¨‹åº¦ Ã— 3ç¨®èªè¨€
- å¤šLLMå¾Œç«¯æ”¯æŒï¼ˆOllamaã€Geminiã€OpenAIã€Claudeï¼‰
- ä¸‰ç¨®å·¥ä½œæµæ¨¡å¼ï¼ˆå¿«é€Ÿ/çŸ¥è­˜é©…å‹•/é‡ç”¨ï¼‰
- æ™ºèƒ½æ’ç‰ˆå’Œæ ¼å¼å„ªåŒ–

### kb-connector âœ…

çŸ¥è­˜åº«é€£æ¥å’Œç®¡ç†

**èªªæ˜**: `.claude/skills/kb-connector.md`

### å¾…å¯¦ä½œSkills

- **note-writer**: çµæ§‹åŒ–Markdownç­†è¨˜ç”Ÿæˆ
- **viz-generator**: ç§‘å­¸è¦–è¦ºåŒ–ç”¢å“ç”Ÿæˆ

## é…ç½®ç®¡ç†

ä¸»é…ç½®æ–‡ä»¶: `config/settings.yaml`

### é‡è¦é…ç½®é …

**é…ç½®ç¯„ä¾‹**: [examples/configuration/settings_example.yaml](examples/configuration/settings_example.yaml)

## èˆ‡SciMakerçš„æ•´åˆ

æœ¬å°ˆæ¡ˆè¤‡ç”¨äº†SciMaker (D:\Apps\LLM\SciMaker) çš„ä»¥ä¸‹è³‡æºï¼š

### Prompt Templates

ä¾†æº: `journal_club_analysis/prompt_templates.txt`
ä½ç½®: `templates/prompts/raw_templates.txt`

åŒ…å«22å€‹å®Œæ•´çš„promptæ¨¡æ¿ï¼Œæ¶µè“‹ï¼š
- 7ç¨®å­¸è¡“é¢¨æ ¼è®Šé«”
- 3ç¨®èªè¨€æ¨¡å¼
- æŠ•å½±ç‰‡æ ¼å¼è¦ç¯„

### å­¸è¡“é¢¨æ ¼å®šç¾©

åŸºæ–¼Journal Clubçš„é¢¨æ ¼ç³»çµ±ï¼Œæå–ä¸¦çµæ§‹åŒ–ç‚ºYAMLé…ç½®ã€‚

### Ollamaæ•´åˆæ¨¡å¼

åƒè€ƒSciMakerçš„æœ¬åœ°LLMæ¨ç†æ¶æ§‹ï¼š
- Modelfileé…ç½®
- APIèª¿ç”¨é‚è¼¯
- ç¹é«”ä¸­æ–‡å„ªåŒ–

### Personaç³»çµ±ï¼ˆå¯é¸ï¼‰

SciMakerçš„personaè¨˜æ†¶æ–‡ä»¶å¯é¸æ“‡æ€§æ•´åˆï¼š
- feynman_memory.md: ç‰©ç†æ•™è‚²
- elon_musk_memory.md: å·¥ç¨‹å‰µæ–°
- eren_jaeger_memory.md: å‹•æ©ŸéŸŒæ€§
- frieren_memory.md: é•·æœŸæ™ºæ…§

## é–‹ç™¼æŒ‡å—

### æ–°å¢Skill

1. åœ¨ `src/` ä¸­å¯¦ä½œåŠŸèƒ½æ¨¡çµ„
2. åœ¨ `.claude/skills/` ä¸­å‰µå»ºSkillæ–‡æª”
3. æ›´æ–°æœ¬æ–‡æª”çš„Skillsåƒè€ƒå€

### æ–°å¢Agent

1. åœ¨ `.claude/agents/` ä¸­å‰µå»ºAgentå®šç¾©
2. æè¿°Agentçš„ä»»å‹™ã€èƒ½åŠ›å’Œèª¿ç”¨çš„Skills
3. æä¾›ä½¿ç”¨ç¤ºä¾‹

### æ–°å¢Slash Command

1. åœ¨ `.claude/commands/` ä¸­å‰µå»ºå‘½ä»¤æ–‡æª”
2. èªªæ˜åƒæ•¸ã€åŠŸèƒ½æµç¨‹å’Œç¤ºä¾‹
3. å¯¦ä½œå°æ‡‰çš„Pythonè…³æœ¬ï¼ˆå¦‚éœ€è¦ï¼‰

### ä¿®æ”¹Promptæ¨¡æ¿

1. ç·¨è¼¯ `templates/prompts/journal_club_template.jinja2`
2. æˆ–åœ¨ `templates/styles/academic_styles.yaml` ä¸­èª¿æ•´é¢¨æ ¼å®šç¾©
3. æ¸¬è©¦ä¸åŒåƒæ•¸çµ„åˆçš„è¼¸å‡º

### æ“´å±•çŸ¥è­˜åº«

1. ä¿®æ”¹ `src/knowledge_base/kb_manager.py` æ·»åŠ æ–°åŠŸèƒ½
2. æ›´æ–°æ•¸æ“šåº«çµæ§‹ï¼ˆå¦‚éœ€è¦ï¼‰
3. æ›´æ–° `.claude/skills/kb-connector.md` æ–‡æª”

## å¸¸ç”¨å‘½ä»¤

```bash
# æ¸¬è©¦PDFæå–
python src/extractors/pdf_extractor.py paper.pdf

# æ¸¬è©¦çŸ¥è­˜åº«
python src/knowledge_base/kb_manager.py

# å®‰è£æ–°ä¾è³´å¾Œæ›´æ–°
pip freeze > requirements.txt

# æŸ¥çœ‹çŸ¥è­˜åº«çµ±è¨ˆ
python -c "from src.knowledge_base import KnowledgeBaseManager; kb = KnowledgeBaseManager(); print(kb.get_stats())"
```

## æ•…éšœæ’é™¤

**å®Œæ•´æŒ‡å—**: [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)

### å¸¸è¦‹å•é¡Œå¿«é€Ÿåƒè€ƒ

| å•é¡Œé¡å‹ | å¿«é€Ÿè§£æ±ºæ–¹æ¡ˆ | è©³ç´°èªªæ˜ |
|----------|-------------|---------|
| **PDF æå–å¤±æ•—** | åˆ‡æ›æå–æ–¹æ³•: `PDFExtractor(method="pypdf2")` | [é€£çµ](docs/TROUBLESHOOTING.md#pdf-è™•ç†å•é¡Œ) |
| **çŸ¥è­˜åº«éŒ¯èª¤** | é‡æ–°åˆå§‹åŒ–: `rm index.db && python -c "from src.knowledge_base import KnowledgeBaseManager; KnowledgeBaseManager()"` | [é€£çµ](docs/TROUBLESHOOTING.md#çŸ¥è­˜åº«å•é¡Œ) |
| **Ollama é€£æ¥å¤±æ•—** | å•Ÿå‹•æœå‹™: `ollama serve` | [é€£çµ](docs/TROUBLESHOOTING.md#llm-é€£æ¥å•é¡Œ) |
| **å‘é‡æœç´¢éŒ¯èª¤** | å®‰è£ä¾è³´: `pip install chromadb tqdm numpy` | [é€£çµ](docs/TROUBLESHOOTING.md#å‘é‡æœç´¢å•é¡Œ) |
| **ç·¨ç¢¼å•é¡Œ** | ä½¿ç”¨ Windows Terminal æˆ– `chcp 65001` | [é€£çµ](docs/TROUBLESHOOTING.md#ç·¨ç¢¼å’Œè·¯å¾‘å•é¡Œ) |

## æœªä¾†æ“´å±•æ–¹å‘

### çŸ­æœŸ (1-2å€‹æœˆ)
- âœ… å®Œæˆpdf-extractorå’Œkb-connector Skills
- âœ… å¯¦ä½œslide-maker Skillï¼ˆåŸºæ–¼Journal Clubï¼‰
  - âœ… å¤šLLMæ”¯æŒï¼ˆOllama/Gemini/OpenAI/Claudeï¼‰
  - âœ… 8ç¨®å­¸è¡“é¢¨æ ¼ + Zettelkasten
  - âœ… æ™ºèƒ½æ’ç‰ˆå’Œæ ¼å¼å„ªåŒ–
  - âœ… ä¸‰ç¨®å·¥ä½œæµæ¨¡å¼
- ğŸ”„ å¯¦ä½œnote-writer Skill
- ğŸ”„ å‰µå»ºliterature-analyzer Agent

### ä¸­æœŸ (3-6å€‹æœˆ)
- ğŸ“… å¯¦ä½œviz-generator Skill
- ğŸ“… æ‰¹é‡è™•ç†åŠŸèƒ½ (/batch-analyze)
- ğŸ“… çŸ¥è­˜åœ–è­œè¦–è¦ºåŒ–
- ğŸ“… å‘é‡æœç´¢æ•´åˆï¼ˆæœ¬åœ°embeddingsï¼‰

### é•·æœŸ (6-12å€‹æœˆ)
- ğŸ“… Webä»‹é¢é–‹ç™¼
- ğŸ“… å¤šç”¨æˆ¶å”ä½œ
- ğŸ“… æ’ä»¶ç³»çµ±
- ğŸ“… èˆ‡å…¶ä»–ç ”ç©¶å·¥å…·æ•´åˆ

## åƒè€ƒè³‡æº

### å…§éƒ¨æ–‡æª”
- Journal Clubåˆ†æ: `D:\Apps\LLM\SciMaker\journal_club_analysis\`
- SciMakeræ–‡æª”: `D:\Apps\LLM\SciMaker\CLAUDE.md`
- å¯¦æ–½è¨ˆç•«: `D:\Apps\LLM\SciMaker\create_plan.py`

### å¤–éƒ¨è³‡æº
- Claude Codeæ–‡æª”: https://docs.claude.com/claude-code
- python-pptxæ–‡æª”: https://python-pptx.readthedocs.io/
- SQLite FTS5: https://www.sqlite.org/fts5.html
- Ollama API: https://github.com/ollama/ollama/blob/main/docs/api.md

## æˆæ¬Šèˆ‡è‡´è¬

æœ¬å°ˆæ¡ˆåŸºæ–¼SciMakerçš„Journal Clubæ¨¡çµ„é€†å‘å·¥ç¨‹æˆæœï¼Œæ„Ÿè¬åŸå§‹ç³»çµ±çš„è¨­è¨ˆç†å¿µå’Œå¯¦ä½œåƒè€ƒã€‚

## ä¸‹ä¸€æ­¥ç™¼å±•æ–¹å‘

### ğŸš€ Zotero + Obsidian æ•´åˆ (Phase 3 è¦åŠƒä¸­)

**è¨­è¨ˆæ–‡æª”**: `D:/core/research/Program_verse/2025-11-09-Zotero-Obsidian-Integration-Design.md`

**æ ¸å¿ƒç›®æ¨™**:
- å¾ Zotero BibTeX å’Œ PDF åº«ç”Ÿæˆ Papers + Zettelkasten
- è¼¸å‡ºåˆ° Obsidian vault (Program_verse/Atlas/Sources/)
- åŸºæ–¼ Connection notes çš„æ¼¸é€²å¼é·ç§»ç­–ç•¥

**è©¦é»è¨ˆç•«**:
- é¸å®š 2 å€‹é«˜å“è³ª Connection notesï¼ˆå…± ~25 ç¯‡è«–æ–‡ï¼‰
- ç”Ÿæˆå®Œæ•´çš„ Papers + Zettelkastenï¼ˆ~500 å¼µå¡ç‰‡ï¼‰
- é©—è­‰ MOC è‡ªå‹•ç”ŸæˆåŠŸèƒ½
- è©•ä¼°æ˜¯å¦å¯å–ä»£æ‰‹å‹• Connection notes

**å¯¦æ–½é †åº**:
1. Phase A (1-2å¤©): BibTeX è§£æ + è·¯å¾‘é…ç½®
2. Phase B (2-3å¤©): Papers ç”Ÿæˆ + é‡è¤‡æª¢æ¸¬
3. Phase C (3-5å¤©): MOC è‡ªå‹•ç”Ÿæˆï¼ˆåŸºæ–¼ Phase 2.2 Concept Mapperï¼‰

**å‰ç½®æ¢ä»¶**:
- âœ… Phase 2.3 å®Œæˆï¼ˆZettelkasten ç©©å®šï¼‰
- âœ… Phase 0 æ¸…ç†å®Œæˆï¼ˆçŸ¥è­˜åº«é‡ç½®ï¼‰
- ğŸ”„ ç­‰å¾…é©—è­‰å’Œé–‹ç™¼

---

**æœ€å¾Œæ›´æ–°**: 2025-11-12
**ç‰ˆæœ¬**: 0.7.1-alpha
**ç‹€æ…‹**: Phase 0 æ¸…ç†å®Œæˆ + Phase 3 è¦åŠƒå•Ÿå‹•

## ç‰ˆæœ¬æ­·å²

**å®Œæ•´è®Šæ›´æ—¥èªŒ**: [CHANGELOG.md](CHANGELOG.md)

### æœ€è¿‘æ›´æ–°

- **v0.7.1-alpha (2025-11-12)**: Phase 0 æ¸…ç† + Phase 3 è¦åŠƒ
  - âœ… å®Œæ•´æ¸…ç†çŸ¥è­˜åº«å’Œ output è³‡æ–™å¤¾ï¼ˆé‡æ–°é–‹å§‹ï¼‰
  - âœ… å‚™ä»½èˆŠæ•¸æ“šåˆ° backups/20251112/
  - âœ… æ­¸æª” 26 å€‹å·¥ä½œæ–‡ä»¶åˆ° docs/archive/2025-11/
  - âœ… Zotero-Obsidian æ•´åˆè¨­è¨ˆå®Œæˆ
  - ğŸ“‹ ç¢ºå®šè©¦é»ç­–ç•¥ï¼ˆ2 å€‹ Connection notesï¼Œæ¼¸é€²å¼é·ç§»ï¼‰
- **v0.7.0-alpha (2025-11-12)**: Phase 2.3 å®Œæˆ - Zettelkasten å¡ç‰‡ç”Ÿæˆç³»çµ±æ”¹é€²
  - âœ… ä¿®å¾©é€£çµç¶²çµ¡è§£æå™¨ï¼ˆéæ¿¾éŒ¯èª¤é€£çµï¼‰
  - âœ… ç¢ºç«‹ä¸‰å€‹é è¨­ LLMï¼ˆGemini 2.0 Flash, DeepSeek R1, Llama 3.3 70Bï¼‰
- **v0.6.0-alpha ~ v0.1.0-alpha**: è©³è¦‹ [CHANGELOG.md](CHANGELOG.md)

**è©³ç´°å…§å®¹**: è«‹åƒé–± [CHANGELOG.md](CHANGELOG.md)
